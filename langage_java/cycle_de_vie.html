

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Le langage Java - Le cycle de vie des objets" name="description" />
<meta content="Java, programmation objet, POO, langage de programmation" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cycle de vie d’un objet &mdash; Documentation Langage Java </title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Les packages" href="package.html" />
    <link rel="prev" title="Attributs &amp; méthodes" href="attributs_et_methodes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Langage Java
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Le langage Java</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#l-environnement">L’environnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#oracle-jdk-et-open-jdk">Oracle JDK et Open JDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#un-bref-historique-des-versions">Un bref historique des versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#configuration-d-eclipse">Configuration d’Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#un-premier-programme">Un premier programme</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-compilation">La compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#l-execution">L’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-liaison-dynamique">La liaison dynamique</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#le-classpath">Le classpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#bibliotheques-java-les-fichiers-jar">Bibliothèques Java : les fichiers JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-instructions">Les instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-typage">Le typage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-blocs-de-code">Les blocs de code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-commentaires">Les commentaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-formatage-du-code">Le formatage du code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-conventions-de-nommage">Les conventions de nommage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-mots-cles">Les mots-clés</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-booleen-boolean">Le type booléen : boolean</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-caractere-char">Le type caractère : char</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-entiers-byte-short-int-long">Les types entiers : byte, short, int, long</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-a-virgule-flottante-float-double">Les types à virgule flottante : float, double</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-classes-enveloppes">Les classes enveloppes</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#l-autoboxing">L’autoboxing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-d-affectation">L’opérateur d’affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques">Les opérateurs arithmétiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques-unaires">Les opérateurs arithmétiques unaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-de-concatenation-de-chaines">L’opérateur de concaténation de chaînes</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-relationnels">Les opérateurs relationnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-logiques">Les opérateurs logiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-bitwise">Les opérateurs <em>bitwise</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-de-decalage">Les opérateurs de décalage</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#le-transtypage-cast">Le transtypage (cast)</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#operateur-et-assignation">Opérateur et assignation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur">L’opérateur .</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#id1">L’opérateur ,</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#if-else">if-else</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#return">return</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#while">while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#do-while">do-while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for">for</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for-ameliore">for amélioré</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#break-continue">break-continue</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#libelle">libellé</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#switch">switch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#initialisation">Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#creation-avec-new">Création avec new</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#acces-aux-elements-d-un-tableau">Accès aux éléments d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tableau-multi-dimensionnel">Tableau multi-dimensionnel</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-en-chaine-de-caracteres">Conversion en chaîne de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#egalite-de-deux-tableaux">Égalité de deux tableaux</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tri-recherche">Tri &amp; recherche</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#copie-d-un-tableau">Copie d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#typage-d-un-tableau">Typage d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-d-un-tableau-en-liste">Conversion d’un tableau en liste</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#declarer-une-classe">Déclarer une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#anatomie-d-une-classe">Anatomie d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#ajouter-des-methodes">Ajouter des méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#la-methode-main">La méthode main</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-en-ligne-de-commandes">Exécuter le programme en ligne de commandes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-depuis-eclipse">Exécuter le programme depuis Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-attributs">Les attributs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-portee">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#l-initialisation">L’initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-finaux">attributs finaux</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe">Attributs de classe</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe-finaux">Attributs de classe finaux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-methodes">Les méthodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#id1">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-valeur-de-retour">La valeur de retour</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-parametres">Les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#parametre-final">Paramètre final</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-variables">Les variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#methodes-de-classe">Méthodes de classe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#surcharge-de-methode-overloading">Surcharge de méthode : overloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#portee-des-noms-et-this">Portée des noms et this</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#principe-d-encapsulation">Principe d’encapsulation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cycle de vie d’un objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#le-constructeur">Le constructeur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parametres-de-constructeur">Paramètres de constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#valeur-par-defaut-des-attributs">Valeur par défaut des attributs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constructeur-par-defaut">Constructeur par défaut</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constructeur-prive">Constructeur privé</a></li>
<li class="toctree-l3"><a class="reference internal" href="#appel-d-un-constructeur-dans-un-constructeur">Appel d’un constructeur dans un constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#appel-d-une-methode-dans-un-constructeur">Appel d’une méthode dans un constructeur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#injection-de-dependances-par-le-constructeur">Injection de dépendances par le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-bloc-d-initialisation">Le bloc d’initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-bloc-d-initialisation-de-classe">Le bloc d’initialisation de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoire-heap-et-stack">Mémoire heap et stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-ramasse-miettes">Le ramasse-miettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-methode-finalize">La méthode finalize</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="package.html#declaration-d-un-package">Déclaration d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#sous-package">Sous package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-d-un-package">Nom d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-complet-d-une-classe">Nom complet d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#import-de-noms">Import de noms</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#la-portee-de-niveau-package">La portée de niveau package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#le-fichier-package-info-java">Le fichier package-info.java</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="heritage_composition.html">Héritage et composition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#l-heritage-is-a">L’héritage (is-a)</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-constructeur">Héritage et constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-simple-object">Héritage simple : Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-affectation">Héritage et affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#le-mot-cle-instanceof">Le mot-clé instanceof</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-portee-protected">La portée protected</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-des-methodes-et-attributs-de-classe">Héritage des méthodes et attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-final">Héritage et final</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-composition-has-a">La composition (has-a)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#principe-du-polymorphisme">Principe du polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#une-exception-les-methodes-privees">Une exception : les méthodes privées</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#redefinition-et-signature-de-methode">Redéfinition et signature de méthode</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-mot-cle-super">Le mot-clé super</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#l-annotation-override">L’annotation &#64;Override</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#les-methodes-de-classe">Les méthodes de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#methode-finale">Méthode finale</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#constructeur-et-polymorphisme">Constructeur et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#masquage-des-attributs-par-heritage">Masquage des attributs par héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-principe-du-ouvert-ferme">Le principe du ouvert/fermé</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-classe-abstraite">Déclarer une classe abstraite</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-methode-abstraite">Déclarer une méthode abstraite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-equals">La méthode equals</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-hashcode">La méthode hashCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-tostring">La méthode toString</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-finalize">La méthode finalize</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-clone">La méthode clone</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-getclass">La méthode getClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#les-methodes-de-concurrence">Les méthodes de concurrence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#string-et-tableau-de-caracteres">String et tableau de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#quelques-methodes-utilitaires">Quelques méthodes utilitaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#construction-d-une-instance-de-string">Construction d’une instance de String</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#immutabilite-des-chaines-de-caracteres">Immutabilité des chaînes de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#la-classe-stringbuilder">La classe StringBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#formatage-de-texte">Formatage de texte</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#les-expressions-regulieres">Les expressions régulières</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#qu-est-ce-qu-une-exception">Qu’est-ce qu’une exception ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#signaler-une-exception">Signaler une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#traiter-une-exception">Traiter une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#propagation-d-une-exception">Propagation d’une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exceptions-et-polymorphisme">Exceptions et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-bloc-finally">Le bloc finally</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-try-with-resources">Le try-with-resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#hierarchie-applicative-d-exception">Hiérarchie applicative d’exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exception-cause">Exception cause</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#les-erreurs-et-les-exceptions-runtime">Les erreurs et les exceptions runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#choix-entre-checked-et-unchecked">Choix entre checked et unchecked</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#les-methodes-d-une-enumeration">Les méthodes d’une énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#egalite-entre-enumerations">Égalité entre énumérations</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#support-de-switch">Support de switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#generation-d-une-enumeration">Génération d’une énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#ajout-de-methodes-et-d-attributs">Ajout de méthodes et d’attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#ajout-de-constructeurs">Ajout de constructeurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interface.html#declaration-d-une-interface">Déclaration d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-d-une-interface">Implémentation d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#attributs-et-methodes-statiques">Attributs et méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#heritage-d-interface">Héritage d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#les-interfaces-marqueurs">Les interfaces marqueurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-par-defaut">Implémentation par défaut</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#la-segregation-d-interface">La ségrégation d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#l-inversion-de-dependance">L’inversion de dépendance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#l-exemple-de-la-classe-arraylist">L’exemple de la classe ArrayList</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#creation-et-assignation-d-une-classe-generique">Création et assignation d’une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#notation-en-diamant">Notation en diamant</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#substitution-et-type-generique">Substitution et type générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-methode-generique">Écrire une méthode générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-classe-generique">Écrire une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-listes">Les listes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraylist">La classe ArrayList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedlist">La classe LinkedList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraydeque">La classe ArrayDeque</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-priorityqueue">La classe PriorityQueue</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-vector-et-stack">Les classes Vector et Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-listes">Les interfaces pour les listes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-ensembles-set">Les ensembles (set)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treeset">La classe TreeSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashset">La classe HashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashset">La classe LinkedHashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-ensembles">Les interfaces pour les ensembles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#copie-d-une-collection-dans-un-tableau">Copie d’une collection dans un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-tableaux-associatifs-maps">Les tableaux associatifs (maps)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treemap">La classe TreeMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashmap">La classe HashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashmap">La classe LinkedHashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-dictionary-et-hashtable">Les classes Dictionary et Hashtable</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-tableaux-associatifs">Les interfaces pour les tableaux associatifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#la-classe-outil-collections">La classe outil Collections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#inputstream-et-classes-concretes">InputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#outputstream-et-classes-concretes">OutputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#flux-orientes-caracteres">Flux orientés caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#reader-et-classes-concretes">Reader et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#writer-et-classes-concretes">Writer et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#les-decorateurs-de-flux">Les décorateurs de flux</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-classe-scanner">La classe Scanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#fichiers-et-chemins">Fichiers et chemins</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#acces-au-reseau">Accès au réseau</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-serialisation-d-objets">La sérialisation d’objets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#donnee-transient">Donnée transient</a></li>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#identifiant-de-version-de-serialisation">Identifiant de version de sérialisation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#date-la-classe-historique">Date : la classe historique</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#calendar">Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#l-api-date-time">L’API Date/Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#id1">Les Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#la-classe-instant">La classe Instant</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#periode-et-duree">Période et durée</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#formatage-des-dates">Formatage des dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#lecture-des-dates">Lecture des dates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Programmation fonctionnelle et lambdas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_lambdas.html#les-fonctions-anonymes-les-lambdas">Les fonctions anonymes : les lambdas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#syntaxe-des-lambdas">Syntaxe des lambdas</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#usage-des-lambdas">Usage des lambdas</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#lambda-et-closure">Lambda et closure</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#les-interfaces-fonctionnelles">Les interfaces fonctionnelles</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#l-operateur-de-reference-de-methode">L’opérateur :: de référence de méthode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_lambdas.html#la-classe-optional">La classe Optional</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a><ul>
<li class="toctree-l2"><a class="reference internal" href="streams.html#creation-d-un-stream">Création d’un stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#la-reduction">La réduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#la-collecte">La collecte</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-filtrage">Le filtrage</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-mapping">Le mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-parallelisme">Le parallélisme</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classe_interne.html">Les classes internes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#les-classes-internes-static">Les classes internes static</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#id1">Les classes internes</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#les-classes-anonymes">Les classes anonymes</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#acces-aux-elements-de-l-objet-englobant">Accès aux éléments de l’objet englobant</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#classe-interne-a-une-methode">Classe interne à une méthode</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#interface-et-enumeration">Interface et énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_interne.html#plusieurs-classes-dans-un-meme-fichier">Plusieurs classes dans un même fichier</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#utilisation-des-annotations">Utilisation des annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#declaration-d-une-annotation">Déclaration d’une annotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#retention-d-une-annotation">Rétention d’une annotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#utilisation-des-annotations-par-introspection">Utilisation des annotations par introspection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Les modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="module.html#des-modules-pour-ameliorer-la-securite">Des modules pour améliorer la sécurité</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#des-modules-pour-plus-de-modularite">Des modules pour plus de modularité</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-descripteur-de-module-module-info-java">Le descripteur de module (module-info.java)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="module.html#dependance-a-d-autres-modules">Dépendance à d’autres modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#exposer-des-packages">Exposer des packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#utiliser-un-service">Utiliser un service</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#fournir-un-service">Fournir un service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-module-anonyme">Le module anonyme</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#la-notion-de-module-path">La notion de module path</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Langage Java</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Cycle de vie d’un objet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="package.html" class="btn btn-neutral float-right" title="Les packages" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="attributs_et_methodes.html" class="btn btn-neutral float-left" title="Attributs &amp; méthodes" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cycle-de-vie-d-un-objet">
<h1>Cycle de vie d’un objet<a class="headerlink" href="#cycle-de-vie-d-un-objet" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce chapitre détaille la création d’un objet et son cycle de vie. Nous aborderons
notamment les constructeurs et les mécanismes de gestion de la mémoire de la JVM.</p>
<div class="section" id="le-constructeur">
<h2>Le constructeur<a class="headerlink" href="#le-constructeur" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de déclarer des méthodes particulières dans une classe que l’on
nomme <strong>constructeurs</strong>. Un constructeur a pour objectif d’initialiser un objet
nouvellement créé afin de garantir qu’il est dans un état cohérent avant d’être
utilisé.</p>
<p>Un constructeur a la signature suivante :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[portée] [nom de la classe]([paramètres]) {

}
</pre></div>
</div>
<p>Un constructeur se distingue d’une méthode car il n’a jamais de type de retour
(pas même <strong>void</strong>). De plus un constructeur a obligatoirement <strong>le même nom que la classe</strong>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Le constructeur</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Lorsqu’une voiture est créée par l’application avec l’opérateur <strong>new</strong> comme
avec l’instruction suivante :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="p">();</span>
</pre></div>
</div>
<p>Alors, la JVM crée l’espace mémoire nécessaire pour le nouvel objet de type
<em>Voiture</em>, puis elle appelle le constructeur et enfin elle assigne la référence
de l’objet à la variable <em>voiture</em>. Donc le constructeur permet de réaliser une
initialisation complète de l’objet selon les besoins des développeurs.</p>
<div class="section" id="parametres-de-constructeur">
<h3>Paramètres de constructeur<a class="headerlink" href="#parametres-de-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme les méthodes, les constructeurs peuvent accepter des paramètres et comme
les méthodes, les constructeurs supportent la surcharge (<em>overloading</em>).
Une classe peut ainsi déclarer plusieurs constructeurs à condition que la liste
des paramètres diffère par le nombre et/ou le type.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la classe <em>Voiture</em> déclare deux constructeurs avec
des paramètres différents. Il est maintenant nécessaire de passer des paramètres
au moment de la création d’une instance de cette classe. Pour cet exemple, on
voit que le constructeur permet de forcer la création d’une instance de <em>Voiture</em>
en fournissant au moins sa marque.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="p">(</span><span class="s">&quot;DeLorean&quot;</span><span class="p">);</span>
<span class="n">Voiture</span> <span class="n">voiture2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="p">(</span><span class="s">&quot;DeLorean&quot;</span><span class="p">,</span> <span class="mf">88.0f</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="valeur-par-defaut-des-attributs">
<h3>Valeur par défaut des attributs<a class="headerlink" href="#valeur-par-defaut-des-attributs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Nous avons vu précédemment que les attributs d’une classe peuvent être initialisés
explicitement à la déclaration. Dans le cas contraire, ils sont initialisés
avec une valeur par défaut. Java garantit que cette initialisation a lieu avant
l’appel au constructeur.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbRoues</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="c1">// la vitesse vaudra 0 et nbRoues vaudra 4</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="c1">// On ne peut créer que des véhicules avec au plus 4 roues</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Les attributs déclarés <strong>final</strong> sont traités un peu différemment. Ces attributs
doivent être obligatoirement et explicitement initialisés avant la fin de la création
de l’objet. Donc, il est possible de les initialiser dans le constructeur. Par
contre, le compilateur génèrera une erreur si :</p>
<ul class="simple">
<li><p>un constructeur tente d’accéder à un attribut <strong>final</strong> qui n’a pas encore été initialisé</p></li>
<li><p>un constructeur se termine sans avoir initialisé explicitement tous les attributs <strong>final</strong></p></li>
<li><p>un constructeur tente d’affecter une valeur à un attribut <strong>final</strong> qui a déjà été initialisé
au moment de sa déclaration.</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">DEFAUT_NBROUES</span><span class="p">;</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="c1">// On ne peut créer que des véhicules avec au plus 4 roues</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="p">:</span> <span class="n">DEFAUT_NBROUES</span><span class="p">;</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="constructeur-par-defaut">
<h3>Constructeur par défaut<a class="headerlink" href="#constructeur-par-defaut" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le compilateur Java garantit que toutes les classes ont au moins un constructeur.
Si vous créez la classe suivante :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Alors, le compilateur ajoutera le code nécessaire qui correspondrait à :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Ce constructeur est appelé le <strong>constructeur par défaut</strong>. Par contre si votre
classe contient au moins un constructeur, quelle que soit sa signature, alors
le compilateur n’ajoutera pas le <strong>constructeur par défaut</strong>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>

  <span class="cm">/* Le compilateur ne génèrera pas de constructeur par défaut.</span>
<span class="cm">   * Pour créer une voiture, je suis obligé de fournir sa marque en paramètre</span>
<span class="cm">   * de création.</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si votre classe ne contient qu’un seul constructeur sans paramètre dont le corps
est vide, alors vous pouvez supprimer cette déclaration car le compilateur le génèrera
automatiquement.</p>
</div>
</div>
<div class="section" id="constructeur-prive">
<h3>Constructeur privé<a class="headerlink" href="#constructeur-prive" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est tout à fait possible d’interdire l’instantiation d’une classe en Java.
Pour cela, il suffit de déclarer tous ses constructeurs avec une portée <strong>private</strong>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculatrice</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="nf">Calculatrice</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">additionner</span><span class="p">(</span><span class="kt">int</span><span class="p">...</span> <span class="n">valeurs</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">resultat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">valeur</span> <span class="p">:</span> <span class="n">valeurs</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">resultat</span> <span class="o">+=</span> <span class="n">valeur</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">resultat</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Comme montré dans l’exemple ci-dessus, un cas d’usage courant est la création
d’une classe outil. Une classe outil ne contient que des méthodes de classe.
Il n’y a donc aucun intérêt à instancier une telle classe. Donc, on déclare un
constructeur privé pour éviter une utilisation incorrecte.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On peut aussi considérer que la classe <em>Calculatrice</em> est simplement un espace
de nom contenant un ensemble de fonctions. Même si les fonctions n’existent
pas en Java, les classes outils sont un moyen de les simuler.</p>
</div>
</div>
<div class="section" id="appel-d-un-constructeur-dans-un-constructeur">
<h3>Appel d’un constructeur dans un constructeur<a class="headerlink" href="#appel-d-un-constructeur-dans-un-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Certaines classes peuvent offrir différents constructeurs à ses utilisateurs.
Souvent ces constructeurs vont partiellement exécuter le même code. Pour simplifier
la lecture et éviter la duplication de code, un constructeur peut appeler un autre
constructeur en utilisant le mot-clé <strong>this</strong> comme nom du constructeur.
Cependant, un constructeur ne peut appeler qu’un <strong>seul</strong> constructeur et,
s’il le fait, cela doit être sa première instruction.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">(</span><span class="n">marque</span><span class="p">,</span> <span class="n">DEFAUT_NBROUES</span><span class="p">,</span> <span class="mf">0f</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">(</span><span class="n">marque</span><span class="p">,</span> <span class="n">nbRoues</span><span class="p">,</span> <span class="mf">0f</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="p">:</span> <span class="n">DEFAUT_NBROUES</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>La classe <em>Vehicule</em> ci-dessus offre plusieurs possibilités d’initialisation, mais
les développeurs de cette classe ont évité la duplication en plaçant le code
d’initialisation dans le troisième constructeur.</p>
</div>
<div class="section" id="appel-d-une-methode-dans-un-constructeur">
<h3>Appel d’une méthode dans un constructeur<a class="headerlink" href="#appel-d-une-methode-dans-un-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est tout à fait possible d’appeler une méthode de l’objet dans un constructeur. Cela
est même très utile pour éviter la duplication de code et favoriser la réutilisation.
Attention cependant au statut particulier des constructeurs. Tant qu’un constructeur
n’a pas achevé son exécution, l’objet n’est pas totalement initialisé. Il peut
donc y avoir des cas où l’appel à une méthode peut avoir des comportements inattendus.</p>
<p>Prenons l’exemple suivant :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">    <span class="n">faireQuelqueChoseDInattendue</span><span class="p">();</span>
</span>    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="p">:</span> <span class="n">DEFAUT_NBROUES</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">faireQuelqueChoseDInattendue</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">nbRoues</span><span class="p">);</span> <span class="c1">// 0</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Le constructeur appelle la méthode <em>faireQuelqueChoseDInattendue</em> qui affiche
la valeur de l’attribut <em>nbRoues</em>. Cet attribut est déclaré <strong>final</strong> donc
il n’est pas modifiable durant la vie de l’objet et la tâche du constructeur
va être, entre autres, de lui assigner une valeur. Mais comme la méthode
<em>faireQuelqueChoseDInattendue</em> est appelée avant l’initialisation, elle affichera
0. Il s’agit d’un comportement aberrant du point de vue de la définition de <strong>final</strong>
mais qui compile et s’exécute sans erreur.</p>
<p>Plus généralement, si vous souhaitez appeler des méthodes de l’objet dans un constructeur,
il faut prendre soin de s’assurer que l’état de l’objet nécessaire à l’exécution
de ces méthodes est correctement initialisé avant par le constructeur.</p>
</div>
</div>
<div class="section" id="injection-de-dependances-par-le-constructeur">
<span id="injection-des-dependances"></span><h2>Injection de dépendances par le constructeur<a class="headerlink" href="#injection-de-dependances-par-le-constructeur" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’état interne d’un objet (ses attributs) inclut souvent des références vers d’autres
objets. Parfois, ces objets peuvent eux-même avoir une représentation interne complexe
qui nécessite des références vers d’autres objets… Par exemple, une classe
<em>Voiture</em> peut nécessiter une instance d’une classe <em>Moteur</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moteur</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbCylindres</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Moteur</span><span class="p">(</span><span class="kt">int</span> <span class="n">nbCylindres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbCylindres</span> <span class="o">=</span> <span class="n">nbCylindres</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nbSoupapesParCylindre</span> <span class="o">=</span> <span class="n">nbSoupapesParCylindre</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">vitesseMax</span> <span class="o">=</span> <span class="n">vitesseMax</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>À partir de la classe <em>Moteur</em> ci-dessus, nous pouvons fournir l’implémentation
suivante de la classe <em>Voiture</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbCylindres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="p">,</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">moteur</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moteur</span><span class="p">(</span><span class="n">nbCylindres</span><span class="p">,</span> <span class="n">nbSoupapesParCylindre</span><span class="p">,</span> <span class="n">vitesseMax</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Et créer une instance de la classe <em>Voiture</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">clio</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="p">(</span><span class="s">&quot;Clio Williams&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">216</span><span class="p">);</span>
</pre></div>
</div>
<p>Cependant, si nous considérons le type de relation qui unit la classe <em>Voiture</em>
à la classe <em>Moteur</em>, nous constatons que non seulement la classe <em>Voiture</em> est
dépendante de la classe <em>Moteur</em> mais qu’en plus la classe <em>Voiture</em> crée
l’instance de la classe <em>Moteur</em> dont elle a besoin. Donc la classe <em>Voiture</em>
a un couplage très fort avec la classe <em>Moteur</em>. Par exemple, si le constructeur
de la classe <em>Moteur</em> évolue alors le constructeur de la classe <em>Voiture</em> doit
également évoluer.</p>
<p>En programmation objet, créer une objet n’hésite souvent de disposer des
informations nécessaires pour invoquer le constructeur de sa classe. La plupart du temps,
les classes qui sont dépendantes d’autres classes n’ont pas vocation à les
créer car il n’y a pas vraiment de raison à ce qu’elles connaissent les
informations nécessaires à leur création. Dans le cas de notre classe <em>Voiture</em>
nous pouvons proposer simplement l’implémentation :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="p">(</span><span class="n">String</span> <span class="n">marque</span><span class="p">,</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">moteur</span> <span class="o">=</span> <span class="n">moteur</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La création d’une instance de <em>Voiture</em> se fait maintenant en deux étapes :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Moteur</span> <span class="n">moteur</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moteur</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">216</span><span class="p">);</span>
<span class="n">Voiture</span> <span class="n">clio</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="p">(</span><span class="s">&quot;Clio Williams&quot;</span><span class="p">,</span> <span class="n">moteur</span><span class="p">);</span>
</pre></div>
</div>
<p>On dit qu’une instance de la classe <em>Moteur</em> est <strong>injectée</strong> par le constructeur
dans une instance de <em>Voiture</em>. En programmation objet, cela signifie que nous
avons découplé l’utilisation de l’instance de la classe <em>Moteur</em> de sa création.</p>
<p>L’injection de dépendances est une technique de programmation qui permet à une
classe de disposer des instances d’objet dont elle a besoin sans avoir à les créer
directement.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>L’injection de dépendance est la technique qui est à la base de <a class="reference external" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">l’inversion
de dépendances</a> (appelée aussi parfois inversion de contrôle) qui est un des
principes <a class="reference external" href="https://fr.wikipedia.org/wiki/SOLID_(informatique)">SOLID</a> en programmation objet. Beaucoup de frameworks Java (comme le
<a class="reference external" href="https://fr.wikipedia.org/wiki/Spring_(framework)">Spring framework</a>) sont basés sur ce principe.</p>
</div>
</div>
<div class="section" id="le-bloc-d-initialisation">
<h2>Le bloc d’initialisation<a class="headerlink" href="#le-bloc-d-initialisation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible d’écrirer un traitement d’initialisation s’effectuant avant l’appel
au constructeur. Il suffit de déclarer un bloc anonyme dans la classe.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="p">;</span>

  <span class="p">{</span>
    <span class="n">Configuration</span> <span class="n">cfg</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="p">();</span>
    <span class="n">nbRoues</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">.</span><span class="na">nbRouesParVoiture</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, on suppose qu’il existe une classe <em>Configuration</em> et qu’il
est possible de consulter la configuration de l’application pour connaître le nombre
de roues par voiture. Le bloc d’initialisation accède à la configuration et affecte la
bonne valeur à l’attribut <strong>final</strong> <em>nbRoues</em>.</p>
<p>Le bloc d’initialisation est très rarement employé en Java. On peut systématiquement
obtenir le même comportement en déclarant un constructeur.</p>
</div>
<div class="section" id="le-bloc-d-initialisation-de-classe">
<h2>Le bloc d’initialisation de classe<a class="headerlink" href="#le-bloc-d-initialisation-de-classe" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible d’écrire un traitement d’initialisation d’une classe. Ce traitement
ne sera effectué qu’une seule fois : au moment du chargement de la définition de la
classe dans la mémoire de la JVM. Une initialisation de classe se fait à l’aide
d’un bloc d’instructions <strong>static</strong>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_ROUES</span><span class="p">;</span>

  <span class="kd">static</span> <span class="p">{</span>
    <span class="n">Configuration</span> <span class="n">cfg</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="p">();</span>
    <span class="n">NB_ROUES</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">.</span><span class="na">nbRouesParVoiture</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, on suppose qu’il existe une classe <em>Configuration</em> et qu’il
est possible de consulter la configuration de l’application pour connaître le nombre
de roues par voiture. Le bloc <strong>static</strong> donne la possibilité d’initialiser
une constante à partir d’un traitement plus complexe.</p>
<p>On peut obtenir un resultat similaire en initialisant la constante <em>NB_ROUES</em> à partir
d’un appel à une méthode de classe :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_ROUES</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="p">().</span><span class="na">nbRouesParVoiture</span><span class="p">;</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="memoire-heap-et-stack">
<h2>Mémoire heap et stack<a class="headerlink" href="#memoire-heap-et-stack" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme pour la plupart des langages de programmation, Java utilise deux espaces mémoires :
la <strong>stack</strong> (ou <em>call stack</em>, la pile d’appel) et le <strong>heap</strong> (le tas).</p>
<p>La <strong>stack</strong> correspond à l’espace alloué pour gérer la mémoire nécessaire à l’exécution
des méthodes (d’un thread). C’est dans cet espace que les variables déclarées dans la méthode
sont stockées. Cet espace a la structure d’un pile car lorsqu’une méthode appelle
une autre méthode, l’espace mémoire nécessaire à cet appel s’empile au dessus de l’espace
mémoire précédent. Lorsqu’une méthode se termine l’espace mémoire qui lui est alloué dans
la stack est libéré. Cela signifie que lorsqu’une méthode se termine, il n’est plus possible
d’accéder aux variables qu’elle a déclarées.</p>
<p>Le <strong>heap</strong> permet de stocker de l’information en allouant dynamiquement de l’espace
mémoire lorsque cela est nécessaire et de le libérer lorsqu’il n’est plus utile. Le
heap a une structuration plus complexe qui tient compte de la durée de vie présumée des éléments
qui le composent. Dans le heap se trouve, la description des classes chargées par la JVM
mais surtout tous les objets créés. En effet, le mot-clé <strong>new</strong> a pour fonction de créer
un nouvel objet en stockant ses informations dans le heap.</p>
<p>Tous les objets Java étant créés dans le heap, leur durée de vie peut être plus longue
que le temps d’exécution d’une méthode. Il n’est pas possible pour un développeur
de demander explicitement la destruction d’un objet. Par contre il existe un procédé appelé
le <em>ramasse-miettes</em> (<strong>garbage collector</strong>) qui se charge de libérer la mémoire
lorsqu’il détecte qu’elle n’est plus utilisée.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La machine virtuelle Java gère elle-même l’espace mémoire allouable à la stack
et au heap (alors qu’il s’agit normalement d’une activité prise en charge
par le système d’exploitation lui-même). Du coup, il est possible de paramétrer
au lancement de la JVM la taille mémoire allouable si on souhaite introduire
des quotas par processus avec les paramètres :</p>
<dl class="simple">
<dt>-Xms&lt;taille&gt;</dt><dd><p>Taille initiale du heap</p>
</dd>
<dt>-Xmx&lt;taille&gt;</dt><dd><p>Taille maximale du heap</p>
</dd>
<dt>-Xss&lt;taille&gt;</dt><dd><p>Taille de la stack (par thread)</p>
</dd>
</dl>
<p>Par exemple :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ java -Xms512M -Xmx512M MonApplication
</pre></div>
</div>
<p>Dans l’exemple précédent, l’application est lancée avec un heap d’une taille fixe
de 512 Mo.</p>
</div>
</div>
<div class="section" id="le-ramasse-miettes">
<h2>Le ramasse-miettes<a class="headerlink" href="#le-ramasse-miettes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le ramasse-miettes (<em>garbage collector</em>) est un processus léger (<em>thread</em>) qui est
créé par la JVM et qui s’exécute régulièrement pour contrôler l’état de la mémoire.
S’il détecte que des portions de mémoire allouées ne sont plus utilisées, il les
libère afin que l’application ne manque pas de ressource mémoire.</p>
<p>La présence du ramasse-miettes évite aux développeurs de devoir demander explicitement
la libération de la mémoire. D’ailleurs il n’est pas possible en Java de demander
explicitement la libération de la mémoire. Cependant, il est important que les
développeurs comprennent le fonctionnement du ramasse-miettes.</p>
<p>Le ramasse-miettes vérifie périodiquement si les objets sont référencés. Un objet
est référencé si :</p>
<ul class="simple">
<li><p>la méthode en cours d’exécution ou une méthode de la pile
d’appel possède une variable référençant cet objet</p></li>
<li><p>il existe un objet référencé qui possède un attribut référençant cet objet</p></li>
</ul>
<p>Le ramasse-miettes gère également le problème de la référence circulaire. Un objet
qui contiendrait un attribut qui le référence directement ou indirectement lui-même
n’est pas réellement considéré comme une référence par le ramasse-miettes.</p>
<p>Donc, si un développeur souhaite qu’un objet soit détruit et son espace mémoire
récupéré, il doit s’assurer que plus aucune référence n’existe vers cet objet.
Par exemple, il peut affecter la valeur <strong>null</strong> aux variables et aux attributs
qui référencent cet objet.</p>
<p>Il est également possible de forcer l’appel au ramasse-miettes gâce à la méthode
<a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#gc()">java.lang.System.gc()</a>. Cependant, cette méthode ne donne aucune garantie quant au résultat.
Vous ne pouvez pas vous baser sur son appel pour garantir la suppression d’un objet
non référencé. Le ramasse-miettes utilise un algorithme complexe qui rend son
comportement difficilement prédictible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le ramasse-miettes est parfois la préoccupation des ingénieurs système. En effet,
les serveurs implémentés en Java dépendent du ramasse-miettes pour gérer la
désallocation de la mémoire. Même si l’exécution du ramasse-miettes est rapide,
elle peut avoir des effets sur des serveurs très sollicités en entraînant
des micro-interruptions du service. Java propose non pas un
mais des algorithmes de ramasses-miettes configurables. Il est donc possible de choisir
au lancement de la JVM le type de ramasse-miettes à utiliser.</p>
<p>Le ramasse-miettes fait l’objet de modification et d’évolution à toutes les versions de Java.
Pour Java 9, vous pouvez vous reporter au
<a class="reference external" href="https://docs.oracle.com/javase/9/gctuning/toc.htm">guide de tuning</a> du ramasse-miettes.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Java propose un mécanisme de ramasse miettes mais ce dernier ne peut libérer
l’espace mémoire que des objets non référencés. Si vous développez une application
qui crée beaucoup d’objets sans donner la possibilité au ramasse-miettes de les collecter,
votre application peut se retrouver à cours d’espace mémoire. Lors de la création d’un
nouvel objet, vous obtiendrez alors une erreur du type <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/OutOfMemoryError.html">java.lang.OutOfMemoryError</a>.</p>
<p>La mémoire n’est pas la seule ressource système avec laquelle les développeurs doivent
composer. Si Java propose un mécanisme pour la gestion de la mémoire, il ne propose
pas de mécanisme automatique pour réclamer les autres types de ressources,
notamment les descripteurs de fichier et de socket.</p>
</div>
</div>
<div class="section" id="la-methode-finalize">
<span id="cycle-de-vie-finalize"></span><h2>La méthode finalize<a class="headerlink" href="#la-methode-finalize" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si un objet souhaite effectuer un traitement avant sa destruction, il peut implémenter
la méthode <em>finalize</em>. Cette méthode a la signature suivante :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dans la pratique cette méthode n’est utilisée que pour des cas d’implémentation très
avancés. En effet, la JVM ne donne strictement <strong>aucune</strong> garantie sur le moment où
la méthode <strong>finalize</strong> est appelée. Elle peut même ne jamais être appelée si l’application se
termine avant que le ramasse-miettes ne réclame l’espace mémoire de l’objet. Elle n’a donc
pas le même statut ni la même importance qu’un destructeur dans le langage C++.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjetCurieux</span> <span class="p">{</span>

  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;je vais disparaître !&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ObjetCurieux</span> <span class="n">objetCurieux</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjetCurieux</span><span class="p">();</span>
    <span class="n">objetCurieux</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="n">System</span><span class="p">.</span><span class="na">gc</span><span class="p">();</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span> <span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, Un objet qui n’implémente que la méthode <em>finalize</em> est créé
puis la variable qui le référence est mise à <strong>null</strong>. Ensuite, le programme appelle
explicitement le ramasse-miettes avec la méthode <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#gc()">java.lang.System.gc()</a>. Enfin,
une boucle se contente d’afficher mille points sur la sortie standard. Cette boucle <strong>for</strong>
est utile car généralement le programme s’arrête trop vite et le ramasse-miettes
n’a pas le temps d’appeler <em>finalize</em>. Si vous exécutez ce programme plusieurs fois,
vous constaterez que le message « je vais disparaître ! » ne s’affiche pas au même moment.
Cela traduit bien le fait que le comportement du ramasse-miettes varie d’une exécution
à l’autre.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="package.html" class="btn btn-neutral float-right" title="Les packages" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="attributs_et_methodes.html" class="btn btn-neutral float-left" title="Attributs &amp; méthodes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  <div  role="contentinfo">
    <p>
    Par David Gayerie
    - <script>!function(){function e(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})}!function(e){document.write("<a href='mailto:"+e+"'>"+e+"</a>")}(e("qnivq.tnlrevr@erfrnh-pq.arg"))}();</script>
    </p>
    <p>Ce support est disponible en téléchargement au format <a class="reference download" href="https://github.com/spoonless/epsi-b3-java/archive/gh-pages.zip">HTML</a>
    </p>
    <p class="copyright">
      <a class="reference external image-reference" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" src="https://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a>
      Cette œuvre est mise à disposition selon les termes de la <a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/fr/">Licence Creative Commons Attribution</a> -  Partage dans les Mêmes Conditions 3.0 France
    </p>
  </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>