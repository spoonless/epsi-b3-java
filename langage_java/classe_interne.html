

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Le langage Java - Les classes internes et les classes anonymes" name="description" />
<meta content="Java, programmation objet, POO, langage de programmation" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  

  <title>Les classes internes &mdash; EPSI B3 - Java</title>



  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Les annotations" href="les_annotations.html" />
    <link rel="prev" title="Streams" href="streams.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> EPSI B3 - Java
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Le langage Java</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#l-environnement">L’environnement</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#oracle-jdk-et-open-jdk">Oracle JDK et Open JDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#un-bref-historique-des-versions">Un bref historique des versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#configuration-d-eclipse">Configuration d’Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#un-premier-programme">Un premier programme</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-compilation">La compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#l-execution">L’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#la-liaison-dynamique">La liaison dynamique</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#le-classpath">Le classpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#bibliotheques-java-les-fichiers-jar">Bibliothèques Java : les fichiers JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-instructions">Les instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-typage">Le typage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-blocs-de-code">Les blocs de code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-commentaires">Les commentaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#le-formatage-du-code">Le formatage du code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-conventions-de-nommage">Les conventions de nommage</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure_fondamentale.html#les-mots-cles">Les mots-clés</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-booleen-boolean">Le type booléen : boolean</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#le-type-caractere-char">Le type caractère : char</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-entiers-byte-short-int-long">Les types entiers : byte, short, int, long</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-types-a-virgule-flottante-float-double">Les types à virgule flottante : float, double</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#les-classes-enveloppes">Les classes enveloppes</a></li>
<li class="toctree-l2"><a class="reference internal" href="types_primitifs.html#l-autoboxing">L’autoboxing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-d-affectation">L’opérateur d’affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques">Les opérateurs arithmétiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-arithmetiques-unaires">Les opérateurs arithmétiques unaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-de-concatenation-de-chaines">L’opérateur de concaténation de chaînes</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-relationnels">Les opérateurs relationnels</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-logiques">Les opérateurs logiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-bitwise">Les opérateurs <em>bitwise</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#les-operateurs-de-decalage">Les opérateurs de décalage</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#le-transtypage-cast">Le transtypage (cast)</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#operateur-et-assignation">Opérateur et assignation</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#l-operateur">L’opérateur .</a></li>
<li class="toctree-l2"><a class="reference internal" href="operateurs.html#id1">L’opérateur ,</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#if-else">if-else</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#return">return</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#while">while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#do-while">do-while</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for">for</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#for-ameliore">for amélioré</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#break-continue">break-continue</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#libelle">libellé</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#switch">switch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#initialisation">Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#creation-avec-new">Création avec new</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#acces-aux-elements-d-un-tableau">Accès aux éléments d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tableau-multi-dimensionnel">Tableau multi-dimensionnel</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-en-chaine-de-caracteres">Conversion en chaîne de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#egalite-de-deux-tableaux">Égalité de deux tableaux</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#tri-recherche">Tri &amp; recherche</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#copie-d-un-tableau">Copie d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#typage-d-un-tableau">Typage d’un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="tableau.html#conversion-d-un-tableau-en-liste">Conversion d’un tableau en liste</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#declarer-une-classe">Déclarer une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#anatomie-d-une-classe">Anatomie d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#ajouter-des-methodes">Ajouter des méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#la-methode-main">La méthode main</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-en-ligne-de-commandes">Exécuter le programme en ligne de commandes</a></li>
<li class="toctree-l2"><a class="reference internal" href="premiere_classe.html#executer-le-programme-depuis-eclipse">Exécuter le programme depuis Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-attributs">Les attributs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-portee">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#l-initialisation">L’initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-finaux">attributs finaux</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe">Attributs de classe</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#attributs-de-classe-finaux">Attributs de classe finaux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#les-methodes">Les méthodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#id1">La portée</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#la-valeur-de-retour">La valeur de retour</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-parametres">Les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#parametre-final">Paramètre final</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#les-variables">Les variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="attributs_et_methodes.html#methodes-de-classe">Méthodes de classe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#surcharge-de-methode-overloading">Surcharge de méthode : overloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#portee-des-noms-et-this">Portée des noms et this</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributs_et_methodes.html#principe-d-encapsulation">Principe d’encapsulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-constructeur">Le constructeur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#parametres-de-constructeur">Paramètres de constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#valeur-par-defaut-des-attributs">Valeur par défaut des attributs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#constructeur-par-defaut">Constructeur par défaut</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#constructeur-prive">Constructeur privé</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#appel-d-un-constructeur-dans-un-constructeur">Appel d’un constructeur dans un constructeur</a></li>
<li class="toctree-l3"><a class="reference internal" href="cycle_de_vie.html#appel-d-une-methode-dans-un-constructeur">Appel d’une méthode dans un constructeur</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#injection-de-dependances-par-le-constructeur">Injection de dépendances par le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-bloc-d-initialisation">Le bloc d’initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-bloc-d-initialisation-de-classe">Le bloc d’initialisation de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#memoire-heap-et-stack">Mémoire heap et stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#le-ramasse-miettes">Le ramasse-miettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cycle_de_vie.html#la-methode-finalize">La méthode finalize</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="package.html#declaration-d-un-package">Déclaration d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#sous-package">Sous package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-d-un-package">Nom d’un package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#nom-complet-d-une-classe">Nom complet d’une classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#import-de-noms">Import de noms</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#la-portee-de-niveau-package">La portée de niveau package</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html#le-fichier-package-info-java">Le fichier package-info.java</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="heritage_composition.html">Héritage et composition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#l-heritage-is-a">L’héritage (is-a)</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-constructeur">Héritage et constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-simple-object">Héritage simple : Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-affectation">Héritage et affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#le-mot-cle-instanceof">Le mot-clé instanceof</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-portee-protected">La portée protected</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-des-methodes-et-attributs-de-classe">Héritage des méthodes et attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#heritage-et-final">Héritage et final</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage_composition.html#la-composition-has-a">La composition (has-a)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#principe-du-polymorphisme">Principe du polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#une-exception-les-methodes-privees">Une exception : les méthodes privées</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#redefinition-et-signature-de-methode">Redéfinition et signature de méthode</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-mot-cle-super">Le mot-clé super</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#l-annotation-override">L’annotation &#64;Override</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#les-methodes-de-classe">Les méthodes de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#methode-finale">Méthode finale</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#constructeur-et-polymorphisme">Constructeur et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#masquage-des-attributs-par-heritage">Masquage des attributs par héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="polymorphisme.html#le-principe-du-ouvert-ferme">Le principe du ouvert/fermé</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-classe-abstraite">Déclarer une classe abstraite</a></li>
<li class="toctree-l2"><a class="reference internal" href="classe_abstraite.html#declarer-une-methode-abstraite">Déclarer une méthode abstraite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-equals">La méthode equals</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-hashcode">La méthode hashCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-tostring">La méthode toString</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-finalize">La méthode finalize</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-clone">La méthode clone</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#la-methode-getclass">La méthode getClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_object.html#les-methodes-de-concurrence">Les méthodes de concurrence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#string-et-tableau-de-caracteres">String et tableau de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#quelques-methodes-utilitaires">Quelques méthodes utilitaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#construction-d-une-instance-de-string">Construction d’une instance de String</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#immutabilite-des-chaines-de-caracteres">Immutabilité des chaînes de caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#la-classe-stringbuilder">La classe StringBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#formatage-de-texte">Formatage de texte</a></li>
<li class="toctree-l2"><a class="reference internal" href="la_classe_string.html#les-expressions-regulieres">Les expressions régulières</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#qu-est-ce-qu-une-exception">Qu’est-ce qu’une exception ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#signaler-une-exception">Signaler une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#traiter-une-exception">Traiter une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#propagation-d-une-exception">Propagation d’une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exceptions-et-polymorphisme">Exceptions et polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-bloc-finally">Le bloc finally</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#le-try-with-resources">Le try-with-resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#hierarchie-applicative-d-exception">Hiérarchie applicative d’exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#exception-cause">Exception cause</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#les-erreurs-et-les-exceptions-runtime">Les erreurs et les exceptions runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_exceptions.html#choix-entre-checked-et-unchecked">Choix entre checked et unchecked</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#les-methodes-d-une-enumeration">Les méthodes d’une énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#egalite-entre-enumerations">Égalité entre énumérations</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#support-de-switch">Support de switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#generation-d-une-enumeration">Génération d’une énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#ajout-de-methodes-et-d-attributs">Ajout de méthodes et d’attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="enumeration.html#ajout-de-constructeurs">Ajout de constructeurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interface.html#declaration-d-une-interface">Déclaration d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-d-une-interface">Implémentation d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#attributs-et-methodes-statiques">Attributs et méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#heritage-d-interface">Héritage d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#les-interfaces-marqueurs">Les interfaces marqueurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#implementation-par-defaut">Implémentation par défaut</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#la-segregation-d-interface">La ségrégation d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html#l-inversion-de-dependance">L’inversion de dépendance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#l-exemple-de-la-classe-arraylist">L’exemple de la classe ArrayList</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#creation-et-assignation-d-une-classe-generique">Création et assignation d’une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#notation-en-diamant">Notation en diamant</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#substitution-et-type-generique">Substitution et type générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-methode-generique">Écrire une méthode générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#ecrire-une-classe-generique">Écrire une classe générique</a></li>
<li class="toctree-l2"><a class="reference internal" href="generiques.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-listes">Les listes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraylist">La classe ArrayList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedlist">La classe LinkedList</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-arraydeque">La classe ArrayDeque</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-priorityqueue">La classe PriorityQueue</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-vector-et-stack">Les classes Vector et Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-listes">Les interfaces pour les listes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-ensembles-set">Les ensembles (set)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treeset">La classe TreeSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashset">La classe HashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashset">La classe LinkedHashSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-ensembles">Les interfaces pour les ensembles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#copie-d-une-collection-dans-un-tableau">Copie d’une collection dans un tableau</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#les-tableaux-associatifs-maps">Les tableaux associatifs (maps)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-treemap">La classe TreeMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-hashmap">La classe HashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#la-classe-linkedhashmap">La classe LinkedHashMap</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-classes-dictionary-et-hashtable">Les classes Dictionary et Hashtable</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_collections.html#les-interfaces-pour-les-tableaux-associatifs">Les interfaces pour les tableaux associatifs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_collections.html#la-classe-outil-collections">La classe outil Collections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#inputstream-et-classes-concretes">InputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#outputstream-et-classes-concretes">OutputStream et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#flux-orientes-caracteres">Flux orientés caractères</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#reader-et-classes-concretes">Reader et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#writer-et-classes-concretes">Writer et classes concrètes</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#les-decorateurs-de-flux">Les décorateurs de flux</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-classe-scanner">La classe Scanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#fichiers-et-chemins">Fichiers et chemins</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#acces-au-reseau">Accès au réseau</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrees_sorties.html#la-serialisation-d-objets">La sérialisation d’objets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#donnee-transient">Donnée transient</a></li>
<li class="toctree-l3"><a class="reference internal" href="entrees_sorties.html#identifiant-de-version-de-serialisation">Identifiant de version de sérialisation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#date-la-classe-historique">Date : la classe historique</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#calendar">Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#l-api-date-time">L’API Date/Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#id1">Les Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#la-classe-instant">La classe Instant</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_dates.html#periode-et-duree">Période et durée</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#formatage-des-dates">Formatage des dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_dates.html#lecture-des-dates">Lecture des dates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Programmation fonctionnelle et lambdas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_lambdas.html#les-fonctions-anonymes-les-lambdas">Les fonctions anonymes : les lambdas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#syntaxe-des-lambdas">Syntaxe des lambdas</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#usage-des-lambdas">Usage des lambdas</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#lambda-et-closure">Lambda et closure</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#les-interfaces-fonctionnelles">Les interfaces fonctionnelles</a></li>
<li class="toctree-l3"><a class="reference internal" href="les_lambdas.html#l-operateur-de-reference-de-methode">L’opérateur :: de référence de méthode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="les_lambdas.html#la-classe-optional">La classe Optional</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a><ul>
<li class="toctree-l2"><a class="reference internal" href="streams.html#creation-d-un-stream">Création d’un stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#la-reduction">La réduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#la-collecte">La collecte</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-filtrage">Le filtrage</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-mapping">Le mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="streams.html#le-parallelisme">Le parallélisme</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Les classes internes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#les-classes-internes-static">Les classes internes static</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Les classes internes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-classes-anonymes">Les classes anonymes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acces-aux-elements-de-l-objet-englobant">Accès aux éléments de l’objet englobant</a></li>
<li class="toctree-l2"><a class="reference internal" href="#classe-interne-a-une-methode">Classe interne à une méthode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interface-et-enumeration">Interface et énumération</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plusieurs-classes-dans-un-meme-fichier">Plusieurs classes dans un même fichier</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#utilisation-des-annotations">Utilisation des annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#declaration-d-une-annotation">Déclaration d’une annotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#retention-d-une-annotation">Rétention d’une annotation</a></li>
<li class="toctree-l2"><a class="reference internal" href="les_annotations.html#utilisation-des-annotations-par-introspection">Utilisation des annotations par introspection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Les modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="module.html#des-modules-pour-ameliorer-la-securite">Des modules pour améliorer la sécurité</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#des-modules-pour-plus-de-modularite">Des modules pour plus de modularité</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-descripteur-de-module-module-info-java">Le descripteur de module (module-info.java)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="module.html#dependance-a-d-autres-modules">Dépendance à d’autres modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#exposer-des-packages">Exposer des packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#utiliser-un-service">Utiliser un service</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html#fournir-un-service">Fournir un service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-module-anonyme">Le module anonyme</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#la-notion-de-module-path">La notion de module path</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EPSI B3 - Java</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Les classes internes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="les_annotations.html" class="btn btn-neutral float-right" title="Les annotations" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="streams.html" class="btn btn-neutral float-left" title="Streams" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="les-classes-internes">
<h1>Les classes internes<a class="headerlink" href="#les-classes-internes" title="Lien permanent vers ce titre">¶</a></h1>
<p>La plupart du temps, une classe en Java est déclarée dans un fichier
portant le même nom que la classe avec l’extension <em>.java</em>. Cependant, il est également
possible de déclarer des classes dans une classe. On parle alors de classes
internes (<em>inner classes</em>). Cela est également possible, dans une certaine limite,
pour les interfaces et les énumérations.</p>
<p>La déclaration des classes internes peut se faire dans l’ordre que l’on souhaite
à l’intérieur du bloc de déclaration de la classe englobante. Les classes internes
peuvent être ou non déclarées <strong>static</strong>. Ces deux cas correspondent à deux
usages particuliers des classes internes.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseEnglobante</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ClasseInterneStatic</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseInterne</span> <span class="p">{</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="les-classes-internes-static">
<h2>Les classes internes static<a class="headerlink" href="#les-classes-internes-static" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les classes internes déclarées <strong>static</strong> sont des classes pour lesquelles
l’espace de noms est celui de la classe englobante.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseEnglobante</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ClasseInterne</span> <span class="p">{</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Pour une classe interne <strong>static</strong> :</p>
<ul>
<li><p>Son nom complet inclut le nom de la classe englobante (qui agit comme un package).
Pour la classe ci-dessus, le nom complet de <em>ClasseInterne</em> est :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">fr.epsi.b3</span><span class="p">.</span><span class="na">ClasseEnglobante</span><span class="p">.</span><span class="na">ClasseInterne</span>
</pre></div>
</div>
</li>
<li><p>La classe englobante et la classe interne partage le même espace privé. Cela
signifie que les attributs et les méthodes privés déclarés dans la classe
englobante sont accessibles à la classe interne. Réciproquement, la classe
englobante peut avoir accés aux éléments privés de la classe interne.</p></li>
<li><p>Une instance de la classe interne n’a accès directement qu’aux
attributs et aux méthodes de la classe englobante qui sont déclarés
<strong>static</strong>.</p></li>
</ul>
<p>Une classe interne <strong>static</strong> est souvent utilisée pour éviter de séparer
dans des fichiers différents de petites classes utilitaires et ainsi de faciliter
la lecture du code. Dans l’exemple ci-dessous, plutôt que de créer un fichier
spécifique pour l’implémentation d’un comparateur, on ajoute son implémentation
comme une classe interne.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Comparator</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Individu</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Comparateur</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Individu</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Individu</span> <span class="n">i1</span><span class="p">,</span> <span class="n">Individu</span> <span class="n">i2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i1</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i2</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kt">int</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">i1</span><span class="p">.</span><span class="na">nom</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">i2</span><span class="p">.</span><span class="na">nom</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">cmp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cmp</span> <span class="o">=</span> <span class="n">i1</span><span class="p">.</span><span class="na">prenom</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">i2</span><span class="p">.</span><span class="na">prenom</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="n">cmp</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">prenom</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">nom</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Individu</span><span class="p">(</span><span class="n">String</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">String</span> <span class="n">nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">prenom</span> <span class="o">=</span> <span class="n">prenom</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">nom</span> <span class="o">=</span> <span class="n">nom</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">prenom</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="na">nom</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Individu</span><span class="o">[]</span> <span class="n">individus</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Eod&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="p">(</span><span class="s">&quot;Annabel&quot;</span><span class="p">,</span> <span class="s">&quot;Doe&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Doe&quot;</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">Arrays</span><span class="p">.</span><span class="na">sort</span><span class="p">(</span><span class="n">individus</span><span class="p">,</span> <span class="k">new</span> <span class="n">Individu</span><span class="p">.</span><span class="na">Comparateur</span><span class="p">());</span>

<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">individus</span><span class="p">));</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la classe <em>Individu</em> fournit publiquement une
implémentation d’un <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Comparator.html">Comparator</a> qui permet de comparer deux instances en
fonction de leur nom et de leur prénom. Notez que l’implémentation de la
méthode <em>compare</em> peut accéder aux attributs privés <em>nom</em> et <em>prenom</em> des
paramètres <em>i1</em> et <em>i2</em> car ils sont de type <em>Individu</em>.</p>
</div>
<div class="section" id="id1">
<h2>Les classes internes<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une classe interne qui n’est pas déclarée avec le mot-clé
<strong>static</strong> est liée au contexte d’exécution d’une instance de la classe
englobante.</p>
<p>Comme pour les classes internes <strong>static</strong>, le nom complet de classe interne
inclut celui de la classe englobante et les deux classes partagent le même
espace privé. Mais surtout, une classe interne maintient une référence implicite
sur un objet de la classe englobante. Cela signifie que :</p>
<ul class="simple">
<li><p>une instance d’une classe interne ne peut être créée que par un objet de
classe englobante : c’est-à-dire dans le corps d’une méthode ou dans le corps
d’un constructeur de la classe englobante.</p></li>
<li><p>une instance d’une classe interne a accès directement aux attributs de l’instance
dans le contexte de laquelle elle a été créée.</p></li>
</ul>
<p>Une classe interne est utilisée pour créer un objet qui a couplage très
fort avec un objet du type de la classe englobante. On utilise fréquemment le
mécanisme de classe interne lorsque l’on veut réaliser une interface graphique
en Java avec l’API <a class="reference external" href="https://docs.oracle.com/javase/tutorial/uiswing/index.html">Swing</a>.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.awt.FlowLayout</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.AbstractAction</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.JButton</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.JDialog</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.JLabel</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BoiteDeDialogue</span> <span class="kd">extends</span> <span class="n">JDialog</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="kd">class</span> <span class="nc">IncrementerAction</span> <span class="kd">extends</span> <span class="n">AbstractAction</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">IncrementerAction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">super</span><span class="p">(</span><span class="s">&quot;Incrémenter&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">incrementer</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kd">class</span> <span class="nc">DecrementerAction</span> <span class="kd">extends</span> <span class="n">AbstractAction</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">DecrementerAction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">super</span><span class="p">(</span><span class="s">&quot;Décrémenter&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">decrementer</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="n">JLabel</span> <span class="n">label</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">valeur</span><span class="p">;</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">dialogInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">super</span><span class="p">.</span><span class="na">dialogInit</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="na">setLayout</span><span class="p">(</span><span class="k">new</span> <span class="n">FlowLayout</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="na">label</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">valeur</span><span class="p">));</span>
    <span class="k">this</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">label</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="k">new</span> <span class="n">IncrementerAction</span><span class="p">()));</span>
    <span class="k">this</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span> <span class="n">JButton</span><span class="p">(</span><span class="k">new</span> <span class="n">DecrementerAction</span><span class="p">()));</span>
    <span class="k">this</span><span class="p">.</span><span class="na">pack</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">incrementer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">label</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="na">valeur</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">decrementer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">label</span><span class="p">.</span><span class="na">setText</span><span class="p">(</span><span class="n">Integer</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="o">--</span><span class="k">this</span><span class="p">.</span><span class="na">valeur</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">BoiteDeDialogue</span> <span class="n">boiteDeDialogue</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoiteDeDialogue</span><span class="p">();</span>
    <span class="n">boiteDeDialogue</span><span class="p">.</span><span class="na">setDefaultCloseOperation</span><span class="p">(</span><span class="n">DISPOSE_ON_CLOSE</span><span class="p">);</span>
    <span class="n">boiteDeDialogue</span><span class="p">.</span><span class="na">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>L’exemple ci-dessus est un programme complet qui crée une boite de dialogue
contenant deux boutons qui permettent respectivement d’incrémenter et de
décrémenter un nombre qui est affiché. La classe <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/JButton.html">JButton</a> qui représente un
bouton attend comme paramètre de construction une instance
implémentant l’interface <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/Action.html">Action</a>. Cette instance définit le libellé du bouton et l’action
à réaliser lorsque l’utilisateur clique sur le bouton. Les boutons sont créés
aux lignes 44 et 45. Les classes d’action utilisées pour chaque bouton sont
définies aux lignes 13 et 24. Ces classes sont
des classes internes. Dans leur méthode <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/Action.html">actionPerformed</a>, elles appellent soit
la méthode <em>incrementer</em> soit la méthode <em>decrementer</em>. Ces deux méthodes
sont définies par la classe englobante BoiteDeDialogue. Donc les instances de
ces classes d’action appellent ces méthodes sur l’instance de l’objet englobant
qui les a créées. Ainsi, les classes internes
possèdent une référence sur l’objet BoiteDeDialogue qui les a créées.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notez dans l’exemple ci-dessus que les méthodes <em>BoiteDeDialogue.incrementer</em>
et <em>BoiteDeDialogue.decrementer</em> sont privées. Comme une classe interne
partage la même portée que sa classe englobante alors les classes internes
<em>IncrementerAction</em> et <em>DecrementerAction</em> peuvent appeler ces méthodes.</p>
</div>
</div>
<div class="section" id="les-classes-anonymes">
<h2>Les classes anonymes<a class="headerlink" href="#les-classes-anonymes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une classe anonyme est une classe qui n’a pas de nom. Elle est déclarée au moment
de l’instanciation d’un objet. Comme une classe anonyme n’a pas de nom, il n’est
pas possible de déclarer une variable qui serait un type de cette classe. Une
classe anonyme est donc utilisée pour créer à la volée une classe qui spécialise
une autre classe ou qui implémente une interface. Pour déclarer une classe anonyme,
on déclare le bloc de la classe au moment de l’instantiation avec <strong>new</strong>.</p>
<p>Imaginons que nous souhaitions créer une interface pour représenter un système
de log :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Logger</span> <span class="p">{</span>

  <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
</div>
<p>On peut fournir une classe <em>GenerateurLogger</em> qui crée des instances implémentant
l’interface <em>Logger</em>.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateurLogger</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">application</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * @param application Le nom de l&#39;application</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">GenerateurLogger</span><span class="p">(</span><span class="n">String</span> <span class="n">application</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">application</span> <span class="o">=</span> <span class="n">application</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerConsoleLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                                         <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>L’implémentation de la méthode <em>creerConsoleLogger</em> crée une instance
implémentant l’interface <em>Logger</em> à partir d’une classe anonyme. L’implémentation
de la méthode <em>log</em> affiche sur la sortie standard une chaîne de caractères
formatée contenant la date et l’heure, le nom de l’application et le message
passé en paramètre. Le nom de l’application correspond à l’attribut <em>application</em>
de la classe <em>GenerateurLogger</em>. Comme pour les classes internes, les classes
anonymes ont accès aux attributs et aux méthodes de l’objet englobant.</p>
<p>Il est possible de récupérer un objet implémetant <em>Logger</em> :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">GenerateurLogger</span> <span class="n">generateur</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenerateurLogger</span><span class="p">(</span><span class="s">&quot;mon_appli&quot;</span><span class="p">);</span>
<span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">generateur</span><span class="p">.</span><span class="na">creerConsoleLogger</span><span class="p">();</span>
<span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;un message de log&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Le code précédent affichera sur la sortie standard :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2017-nov.-jeu. 15:58 mon_appli - un message de log
</pre></div>
</div>
<p>Nous pouvons enrichir notre implémentation. Par exemple, la classe <em>GenerateurLogger</em>
peut créer un logger qui ne fait rien ou encore un logger qui écrit les messages
dans un fichier.</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.StandardOpenOption</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateurLogger</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">application</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * @param application Le nom de l&#39;application</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">GenerateurLogger</span><span class="p">(</span><span class="n">String</span> <span class="n">application</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">application</span> <span class="o">=</span> <span class="n">application</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerConsoleLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                                         <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerNoopLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerFileLogger</span><span class="p">(</span><span class="n">Path</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">String</span> <span class="n">logMessage</span> <span class="o">=</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                                          <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
        <span class="k">try</span><span class="p">(</span><span class="n">Writer</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Files</span><span class="p">.</span><span class="na">newBufferedWriter</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">CREATE</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">APPEND</span><span class="p">))</span> <span class="p">{</span>
          <span class="n">w</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">logMessage</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">logMessage</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>La classe ci-dessus définit maintenant trois classes anonymes qui implémentent toutes
l’interface <em>Logger</em>. Notez à la ligne 50, que la classe anonyme qui écrit le
message de log dans un fichier, ouvre le fichier à partir d’un paramètre <em>path</em>
passé à la méthode <em>creerFileLogger</em>. Cela signifie qu’une classe anonyme
a accès au paramètre de la méthode qui la déclare.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Une classe anonyme peut utiliser les paramètres et les variables de la méthode qui la déclare
uniquement à condition qu’ils ne soient modifiés ni par la méthode ni par la
classe anonyme. Avant Java 8, le compilateur exigeait que ces
paramètres et ces variables soient déclarés avec le mot-clé <strong>final</strong>. Même
s’il n’est plus nécessaire de déclarer explicitement le statut <strong>final</strong>,
le compilateur générera tout de même une erreur si on tente de modifier un
paramètre ou une variable déclaré dans la méthode et utilisé par une classe anonyme.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// on déclare le paramètre final pour signaler explicitement qu&#39;il n&#39;est</span>
<span class="c1">// pas possible de modifier la référence de ce paramètre puisqu&#39;il est</span>
<span class="c1">// utilisé par la classe anonyme.</span>
<span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerFileLogger</span><span class="p">(</span><span class="kd">final</span> <span class="n">Path</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Pour le format du message utilisé dans printf</span>
      <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
      <span class="n">String</span> <span class="n">logMessage</span> <span class="o">=</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                                        <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
      <span class="k">try</span><span class="p">(</span><span class="n">Writer</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Files</span><span class="p">.</span><span class="na">newBufferedWriter</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">CREATE</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">APPEND</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">w</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">logMessage</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">logMessage</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="acces-aux-elements-de-l-objet-englobant">
<h2>Accès aux éléments de l’objet englobant<a class="headerlink" href="#acces-aux-elements-de-l-objet-englobant" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si nous reprenons notre code de la classe <em>GenerateurLogger</em>, nous nous
rendons compte que le formatage du message a été dupliqué pour le logger
qui écrit sur la sortie standard et pour celui qui écrit dans un fichier. Afin
de mutualiser le code, nous pouvons créer une méthode <em>genererLogMessage</em>
dans la classe englobante qui pourra être appelée par chaque classe anonyme.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.StandardOpenOption</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateurLogger</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">application</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * @param application Le nom de l&#39;application</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">GenerateurLogger</span><span class="p">(</span><span class="n">String</span> <span class="n">application</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">application</span> <span class="o">=</span> <span class="n">application</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerConsoleLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">genererLogMessage</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerFileLogger</span><span class="p">(</span><span class="n">Path</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span><span class="p">(</span><span class="n">Writer</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Files</span><span class="p">.</span><span class="na">newBufferedWriter</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">CREATE</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">APPEND</span><span class="p">))</span> <span class="p">{</span>
          <span class="n">w</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">genererLogMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">genererLogMessage</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerNoopLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="nf">genererLogMessage</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                         <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Mais nous voulons appeler cette nouvelle méthode <em>log</em>. Ce nom rentrera
en collision avec le nom de le méthode <em>log</em> de l’interface <em>Logger</em>.
Il existe une syntaxe particulière qui permet de référencer explicitement
le contexte de la classe englobante en utilisant :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NomDeLaClasse.this
</pre></div>
</div>
<p>Ainsi nous pouvons renommer notre méthode <em>genererLogMessage</em> en <em>log</em>
et nous pouvons l’invoquer explicitement dans les méthodes des classes anonymes avec la
syntaxe :</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">GenerateurLogger</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cette syntaxe permet d’accéder aux attributs et aux méthodes de l’instance de
la classe englobante.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.Writer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.StandardOpenOption</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateurLogger</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">application</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * @param application Le nom de l&#39;application</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">GenerateurLogger</span><span class="p">(</span><span class="n">String</span> <span class="n">application</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">application</span> <span class="o">=</span> <span class="n">application</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerConsoleLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">GenerateurLogger</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerFileLogger</span><span class="p">(</span><span class="n">Path</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="k">try</span><span class="p">(</span><span class="n">Writer</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Files</span><span class="p">.</span><span class="na">newBufferedWriter</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">CREATE</span><span class="p">,</span> <span class="n">StandardOpenOption</span><span class="p">.</span><span class="na">APPEND</span><span class="p">))</span> <span class="p">{</span>
          <span class="n">w</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">GenerateurLogger</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">message</span><span class="p">)).</span><span class="na">append</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">System</span><span class="p">.</span><span class="na">err</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">GenerateurLogger</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerNoopLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Logger</span><span class="p">()</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                         <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il n’est pas possible de déclarer un constructeur dans une classe anonyme. En
effet, un constructeur porte le même nom que sa classe et justement, par
définition, les classes anonymes n’ont pas de nom. Le compilateur générera
néanmoins un constructeur par défaut.</p>
<p>Cela entraîne une limitation : il n’est pas possible de déclarer une classe anonyme
qui étendrait une classe ne possédant pas de constructeur sans paramètre.</p>
</div>
</div>
<div class="section" id="classe-interne-a-une-methode">
<h2>Classe interne à une méthode<a class="headerlink" href="#classe-interne-a-une-methode" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de déclarer une classe dans une méthode. Dans ce cas, il n’est
pas possible de préciser la portée de la classe. La classe a automatiquement
une portée très particulière puisqu’elle n’est visible que depuis la méthode
dans laquelle elle est déclarée. Une classe déclarée dans une
méthode peut fonctionner de la même manière qu’une classe anonyme : elle
peut accéder aux paramètres et aux variables de la méthode qui la déclare (à
condition qu’ils ne soient modifiés ni par la méthode ni par la classe).</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.logger</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateurLogger</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">application</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * @param application Le nom de l&#39;application</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">GenerateurLogger</span><span class="p">(</span><span class="n">String</span> <span class="n">application</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">application</span> <span class="o">=</span> <span class="n">application</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">creerConsoleLogger</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="nc">ConsoleLogger</span> <span class="kd">implements</span> <span class="n">Logger</span> <span class="p">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pour le format du message utilisé dans printf</span>
        <span class="c1">// Cf. https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Formatter.html#syntax</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">GenerateurLogger</span><span class="p">.</span><span class="na">this</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ConsoleLogger</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="nf">log</span><span class="p">(</span><span class="n">String</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;%1$tY-%1$tb-%1$ta %1$tH:%1$tM %2$s - %3$s&quot;</span><span class="p">,</span>
                         <span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">(),</span> <span class="n">application</span><span class="p">,</span> <span class="n">message</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la méthode <em>creerConsoleLogger</em> déclare la classe
interne <em>ConsoleLogger</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Contrairement aux classes anonymes, une classe interne à une méthode peut
déclarer des constructeurs.</p>
</div>
</div>
<div class="section" id="interface-et-enumeration">
<h2>Interface et énumération<a class="headerlink" href="#interface-et-enumeration" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de déclarer des interfaces et des énumérations dans une classe.
Il est même possible de déclarer des interfaces et des énumérations dans une
interface. Dans ce cas, les interfaces et les énumérations sont traitées
implicitement comme <strong>static</strong>. On peut ou non préciser le mot-clé.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseEnglobante</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">InterfaceInterne</span> <span class="p">{</span>

  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">EnumerationInterne</span><span class="p">{</span><span class="n">VALEUR1</span><span class="p">,</span> <span class="n">VALEUR2</span><span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="plusieurs-classes-dans-un-meme-fichier">
<h2>Plusieurs classes dans un même fichier<a class="headerlink" href="#plusieurs-classes-dans-un-meme-fichier" title="Lien permanent vers ce titre">¶</a></h2>
<p>Même s’il ne s’agit pas de classes internes, il est possible de déclarer
plusieurs classes dans un même fichier en Java. Mais les classes supplémentaires
sont forcément de portée package.</p>
<p>En pratique cette possibilité n’est jamais utilisée par les développeurs qui
préfèrent utiliser des classes internes <strong>static</strong> ou un fichier propre à
chaque classe.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="les_annotations.html" class="btn btn-neutral float-right" title="Les annotations" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="streams.html" class="btn btn-neutral float-left" title="Streams" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  <div  role="contentinfo">
    <p>
    Par David Gayerie
    - <script>!function(){function e(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode((e<="Z"?90:122)>=(e=e.charCodeAt(0)+13)?e:e-26)})}!function(e){document.write("<a href='mailto:"+e+"'>"+e+"</a>")}(e("qnivq.tnlrevr@erfrnh-pq.arg"))}();</script>
    </p>
    <p>Ce support est disponible en téléchargement au format <a class="reference download" href="https://github.com/spoonless/epsi-b3-java/archive/gh-pages.zip">HTML</a>
    </p>
    <p class="copyright">
      <a class="reference external image-reference" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" src="https://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a>
      Cette œuvre est mise à disposition selon les termes de la <a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/fr/">Licence Creative Commons Attribution</a> -  Partage dans les Mêmes Conditions 3.0 France
    </p>
  </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>