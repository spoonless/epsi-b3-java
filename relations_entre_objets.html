
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Les relations entre objets &#8212; documentation Le langage Java 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Le polymorphisme" href="polymorphisme.html" />
    <link rel="prev" title="Les packages" href="package.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="les-relations-entre-objets">
<h1>Les relations entre objets<a class="headerlink" href="#les-relations-entre-objets" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une application Java est composée d’un ensemble d’objets. Un des intérêts de la
programmation objet réside dans les relations que ces objets entretiennent les
uns avec les autres. Ces relations sont construites par les développeurs et
constituent ce que l’on appelle l’architecture d’une application. Il existe
deux relations fondamentales en programmation objet :</p>
<dl class="docutils">
<dt><strong>est un</strong> (<em>is-a</em>)</dt>
<dd>Cette relation permet de créer une chaîne de relation d’identité entre des
classes. Elle indique qu’une classe peut être assimilée à une autre classe
qui correspond à une notion plus abstraite ou plus générale.
On parle <strong>d’héritage</strong> pour désigner le mécanisme qui permet d’implémenter ce type de relation.</dd>
<dt><strong>a un</strong> (<em>has-a</em>)</dt>
<dd>Cette relation permet de créer une relation de dépendance d’une classe envers
une autre. Une classe a besoin des services d’une autre classe pour réaliser
sa fonction. On parle également de relation de <strong>composition</strong> pour désigner
ce type de relation.</dd>
</dl>
<div class="section" id="l-heritage-is-a">
<h2>L’héritage (is-a)<a class="headerlink" href="#l-heritage-is-a" title="Lien permanent vers ce titre">¶</a></h2>
<p>Imaginons que nous voulions développer un simulateur de conduite. Nous pouvons
concevoir une classe <em>Voiture</em> qui sera la représentation d’une voiture dans
notre application.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Mais nous pouvons également rendre possible la simulation d’une moto. Dans ce
cas, nous aurons également besoin d’une classe <em>Moto</em>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>On se rend vite compte qu’au stade de notre développement, une voiture et une
moto représentent la même chose. Faut-il alors créer deux classes
différentes ? En programmation objet, il n’y a pas de réponse toute faite à cette
question. Mais si notre application gère, par exemple, le type de permis de
conduire, il serait judicieux d’avoir des représentations différentes pour ces
types de véhicule car ils nécessitent des permis de conduire différents.
Si mon application de simulation permet de faire se déplacer des objets
de ces classes, alors il va peut-être falloir autoriser les objets de type
<em>Voiture</em> à aller en marche arrière mais pas les objets de type <em>Moto</em>. Bref,
comme souvent en programmation objet, on se retrouve avec des classes qui ont
des notions en commun (dans notre exemple, la vitesse et la marque), tout en ayant
leurs propres spécificités.</p>
<p>Pour ce type de relations, nous pouvons utiliser l’héritage pour faire apparaître
une classe réprésentant une notion plus générale ou plus abstraite. Dans notre
exemple, il pourrait s’agir de la classe <em>Vehicule</em>. Les classes <em>Voiture</em> et
<em>Moto</em> peuvent <em>hériter</em> de cette nouvelle classe puiqu’une voiture <strong>est un</strong>
véhicule et une moto <strong>est un</strong> véhicule.</p>
<img alt="_images/heritage_vehicule.png" src="_images/heritage_vehicule.png" />
<p>En Java, l’héritage est indiqué par le mot clé <strong>extends</strong> après le nom de la
classe. On dit donc qu’une classe en <em>étend</em> une autre. La classe qui est étendue
est appelée <em>classe mère</em> ou <em>classe parente</em> et la classe qui étend est appelée
<em>classe fille</em> ou <em>classe enfant</em>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Le terme d’héritage vient du fait qu’une classe qui en étend une autre <em>hérite</em>
de la définition de sa classe parente et notamment de ses attributs et de ses
méthodes. Par exemple, les classes <em>Voiture</em> et <em>Moto</em> ont en commun la déclaration
de l’attribut <em>vitesse</em>. Cet attribut semble donc faire partie de la généralisation
commune de <em>Vehicule</em>.</p>
<img alt="_images/heritage_vehicule_attribut_vitesse.png" src="_images/heritage_vehicule_attribut_vitesse.png" />
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Il est maintenant possible d’ajouter les méthodes <em>accelerer</em> et <em>decelerer</em> à
la classe Vehicule et les classes <em>Voiture</em> et <em>Moto</em> en hériteront.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">+=</span> <span class="n">deltaVitesse</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">decelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">-</span> <span class="n">deltaVitesse</span><span class="o">,</span> <span class="mf">0f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Tous les véhicules de cette application peuvent maintenant accélérer et décélérer.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppliSimple</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
    <span class="n">voiture</span><span class="o">.</span><span class="na">accelerer</span><span class="o">(</span><span class="mi">88</span><span class="o">);</span>

    <span class="n">Moto</span> <span class="n">moto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moto</span><span class="o">(</span><span class="s">&quot;Kaneda&quot;</span><span class="o">);</span>
    <span class="n">moto</span><span class="o">.</span><span class="na">accelerer</span><span class="o">(</span><span class="mi">120</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="heritage-et-constructeur">
<h2>Héritage et constructeur<a class="headerlink" href="#heritage-et-constructeur" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans notre exemple précédent, l’attribut <em>marque</em> pourrait tout aussi bien être
mutualisé dans la classe <em>Vehicule</em>. Cependant, il va falloir tenir compte
des constructeurs de <em>Voiture</em> et <em>Moto</em> qui garantissent une initialisation
de cet attribut à partir du paramètre.</p>
<p>En Java, nous avons vu qu’un constructeur peut appeler un autre constructeur
déclaré dans la même classe grâce au mot-clé <em>this</em>. De la même manière, un
constructeur peut appeler un constructeur de sa classe parente grâce au mot-clé
<strong>super</strong>. Il doit respecter les mêmes contraintes :</p>
<ul class="simple">
<li>Un constructeur ne peut appeler qu’un constructeur.</li>
<li>L’appel au constructeur doit être la première instruction du constructeur.</li>
</ul>
<p>Il est donc possible de déclarer un constructeur dans la classe <em>Vehicule</em> et
d’appeler ce constructeur depuis les constructeurs de <em>Voiture</em> et <em>Moto</em>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">+=</span> <span class="n">deltaVitesse</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">decelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">-</span> <span class="n">deltaVitesse</span><span class="o">,</span> <span class="mf">0f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p><em>Voiture</em> et <em>Moto</em> peuvent maintenant proposer leurs propres méthodes et attributs
tout en ayant en commun les mêmes méthodes et attributs que la classe <em>Vehicule</em>.</p>
<img alt="_images/heritage_vehicule_attribut_vitesse_marque.png" src="_images/heritage_vehicule_attribut_vitesse_marque.png" />
<p>En java, si votre constructeur n’appelle aucun constructeur, alors le compilateur
génèrera une instruction d’appel au constructeur sans paramètre de la classe parente.</p>
<p>Si vous créez la classe suivante :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.simple.test</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MaClasse</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">MaClasse</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Le compilateur génèrera le bytecode correspondant au code suivant :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.simple.test</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MaClasse</span> <span class="kd">extends</span> <span class="n">Object</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">MaClasse</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">()</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Si vous omettez d’appeler un constructeur, alors le compilateur part du principe
qu’il en existe un de disponible dans la classe parente et que ce constructeur
ne prend pas de paramètre. Ainsi, Java garantit qu’un constructeur de la classe
parente est toujours appelé avant l’exécution du constructeur courant. Cela signifie
que, lors de la création d’un objet, on commence toujours par initialiser la
classe la plus haute dans la hiérarchie d’héritage.</p>
<p>Ce qui peut sembler surprenant dans l’exemple précédent est que la classe
<em>MaClasse</em> ne déclare pas de classe parente mais que le compilateur va forcer
un héritage.</p>
</div>
<div class="section" id="heritage-simple-object">
<h2>Héritage simple : Object<a class="headerlink" href="#heritage-simple-object" title="Lien permanent vers ce titre">¶</a></h2>
<p>Java ne supporte pas l’héritage multiple. Soit le développeur déclare avec
le mot-clé <strong>extends</strong> une seule classe parente, soit le compilateur part
du principe que la classe hérite de la classe <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a>. Toutes les classes
en Java ont une classe parente (hormis la classe <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a>). L’arbre d’héritage
en Java ne possède qu’une seule classe racine : la classe <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">C’est la classe <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a> qui déclare notamment les méthodes <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--">toString</a> et <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-">equals</a>.
Voilà pourquoi tous les objets Java peuvent avoir par défaut une représentation
sous forme de chaîne de caractères et qu’ils peuvent être comparés aux autres.</p>
</div>
</div>
<div class="section" id="heritage-et-affectation">
<h2>Héritage et affectation<a class="headerlink" href="#heritage-et-affectation" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’héritage introduit la notion de <em>substituabilité</em> entre la classe enfant et la
classe parente. Une classe enfant a son propre type mais partage également le
même type que sa classe parente.</p>
<p>Pour notre exemple, cela signifie que l’on peut affecter à une variable de type
<em>Vehicule</em>, une instance de <em>Voiture</em> ou une instance de <em>Moto</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Vehicule</span> <span class="n">vehicule</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">vehicule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
<span class="n">vehicule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moto</span><span class="o">(</span><span class="s">&quot;Kaneda&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>Cette possibilité introduit une abstraction importante dans la programmation
objet. Si une partie d’un programme a besoin d’une instance de type <em>Vehicule</em>
pour s’exécuter, alors cela signifie qu’une instance de n’importe quelle classe
héritant directement ou indirectement de <em>Vehicule</em> peut être utilisée.</p>
<p>Lorsqu’on crée une classe par héritage, cela signifie qu’il faut faire attention
à ne pas altérer le comportement attendu par les utilisateurs de la classe parente.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’acronyme <a class="reference external" href="https://fr.wikipedia.org/wiki/SOLID_(informatique)">SOLID</a> proposé par Robert Matin regroupe 5 principes importants
de la programmation objet. La lettre L désigne le <a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_de_substitution_de_Liskov">Liskov substitution principle</a>
(principe de substitution de Liskov) qui décrit ce principe de substitution
entre un type et son sous-type et les contraintes qui en découlent pour la
conception objet.</p>
</div>
<p>Le principe de substituabilité est une application du transtypage (<em>casting</em>).
Comme pour les types primitifs, il est possible d’affecter une référence d’un
objet à une variable, attribut ou paramètre d’un type différent. Pour que cette
affectation soit possible il faut que les deux types fassent partie de la même
hiérarchie d’héritage.</p>
<img alt="_images/heritage_downcasting_casting.png" src="_images/heritage_downcasting_casting.png" />
<p>Si le type d’arrivée correspond à un type parent, on parle <em>d’upcasting</em>
(transtypage vers le haut). Si le type d’arrivée correspond à un type enfant,
on parle de <em>downcasting</em> (transtypage vers le bas).</p>
<p>À partir du moment où l’implémentation des classes respectent le
<a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_de_substitution_de_Liskov">principe de substitution de Liskov</a>, l’upcasting est une opération sûre en
programmation objet. Voilà pourquoi, il est possible d’affecter des instances
de type <em>Voiture</em> à des variables de type <em>Vehicule</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Comme Java se base sur une hiérarchie à racine unique, toutes les classes
héritent directement ou indirectement de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a>. Donc, toute instance peut
être affectée à une variable, un attribut ou un paramètre de type <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a>.</p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
<span class="n">obj</span> <span class="o">=</span> <span class="s">&quot;ceci est une chaine de caractère&quot;</span><span class="o">;</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</pre></div>
</div>
</div>
<p>À l’inverse, le downcasting n’est pas une opération sûre en programmation objet.
Prenons l’exemple trivial suivant :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Vehicule</span> <span class="n">vehicule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
<span class="hll"><span class="n">Moto</span> <span class="n">moto</span> <span class="o">=</span> <span class="n">vehicule</span><span class="o">;</span> <span class="c1">// ERREUR</span>
</span></pre></div>
</div>
<p>La variable <em>vehicule</em> référence un objet de type Voiture, il n’est donc pas possible
d’affecter cet objet à une variable de type <em>Moto</em>. Pour cette raison, le
langage Java, n’autorise pas par défaut le downcasting : l’exemple ci-dessus
ne compilera pas. Il est cependant possible de forcer le transtypage en
utilisant la même syntaxe que pour les types primitifs.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Vehicule</span> <span class="n">vehicule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
<span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="o">(</span><span class="n">Voiture</span><span class="o">)</span> <span class="n">vehicule</span><span class="o">;</span>
<span class="hll"><span class="n">Moto</span> <span class="n">moto</span> <span class="o">=</span> <span class="o">(</span><span class="n">Moto</span><span class="o">)</span> <span class="n">vehicule</span><span class="o">;</span> <span class="c1">// ERREUR</span>
</span></pre></div>
</div>
<p>Le code précédent compile puisque le développeur déclare explicitement le downcasting.
Cependant, l’affectation à la ligne 3 est erronée puisque la variable <em>vehicule</em>
référence une instance de <em>Voiture</em> que l’on veut affecter à une variable de type
<em>Moto</em>. Pour les types primitifs, un transtypage invalide conduit à une possible
perte de données. Par contre, pour des objets, un transtypage invalide génère à
l’exécution une erreur de type <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassCastException.html">java.lang.ClassCastException</a>.</p>
</div>
<div class="section" id="le-mot-cle-instanceof">
<h2>Le mot-clé instanceof<a class="headerlink" href="#le-mot-cle-instanceof" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de découvrir à l’exécution si une variable, un attribut ou un
paramètre est d’un type attendu, cela permet de contrôler les opérations de
downcasting et d’éviter des erreurs d’exécution. Pour cela, le mot-clé <strong>instanceof</strong>
retourne <strong>true</strong> si l’opérande à gauche est d’un type compatible avec l’opérande
à droite.</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Vehicule</span> <span class="n">vehicule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>

<span class="k">if</span> <span class="o">(</span><span class="n">vehicule</span> <span class="k">instanceof</span> <span class="n">Voiture</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="o">(</span><span class="n">Voiture</span><span class="o">)</span> <span class="n">vehicule</span><span class="o">;</span>
  <span class="c1">// ...</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">(</span><span class="n">vehicule</span> <span class="k">instanceof</span> <span class="n">Moto</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Moto</span> <span class="n">moto</span> <span class="o">=</span> <span class="o">(</span><span class="n">Moto</span><span class="o">)</span> <span class="n">vehicule</span><span class="o">;</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Le code ci-dessus s’exécutera sans erreur. À la ligne 8, comme la variable
<em>vehicule</em> ne référence pas un objet compatible avec le type <em>Moto</em>, <strong>instanceof</strong>
retournera <strong>false</strong>, empêchant ainsi le bloc de s’exécuter. Une opération de
downcasting devrait toujours être contrôlée par une expression <strong>instanceof</strong> et
le programme devrait être capable de se comporter correctement si l’instruction
<strong>instanceof</strong> retourne <strong>false</strong>.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">Si le recours à <strong>instanceof</strong> permet de rendre les applications plus robustes,
il n’en reste pas moins que les opérations de downcasting doivent rester
l’exception dans un programme. Un recours systématique au downcasting est souvent
le signe d’une mauvaise conception objet.</p>
</div>
</div>
<div class="section" id="la-portee-protected">
<span id="portee-protected"></span><h2>La portée protected<a class="headerlink" href="#la-portee-protected" title="Lien permanent vers ce titre">¶</a></h2>
<p>Précédemment, nous avons introduit la classe <em>Vehicule</em> et nous avons pu l’utiliser
pour mutualiser la déclaration des attributs <em>vitesse</em> et <em>marque</em>. Ces attributs
ont été déclarés comme <em>private</em>. Donc ils ne sont accessibles que depuis la
classe <em>Vehicule</em>. Même si la classe <em>Voiture</em> hérite des attributs et des
méthodes de <em>Vehicule</em>, elles ne peut pas accéder aux attributs et aux méthodes
privés des classes parentes. Imaginons maintenant que nous souhaitons ajouter
la méthode <em>reculer</em>. Comme nous ne souhaitons pas fournir cette possibilité aux
objets de la classe <em>Moto</em>, nous voulons ajouter cette méthode uniquement à la
classe <em>Voiture</em>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">reculer</span><span class="o">(</span><span class="kt">float</span> <span class="n">vitesse</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="o">-</span><span class="n">vitesse</span><span class="o">;</span>
</span>  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Le code précédent ne peut pas accéder à l’attribut <em>vitesse</em> déclaré dans la
classe parente car il a été déclaré avec une portée <strong>private</strong>.</p>
<p>En Java, il existe une quatrième portée : la portée <strong>protected</strong>. Les attributs
et les méthodes déclarés avec la portée <strong>protected</strong> sont accessibles par
les membres du même package et par les classes filles. Ainsi en modifiant
la déclaration de la classe <em>Vehicule</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">protected</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">+=</span> <span class="n">deltaVitesse</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">decelerer</span><span class="o">(</span><span class="kt">float</span> <span class="n">deltaVitesse</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">-</span> <span class="n">deltaVitesse</span><span class="o">,</span> <span class="mf">0f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>La classe <em>Voiture</em> pourra compiler car elle a maintenant accès à l’attribut
<em>vitesse</em>.</p>
<p>Le tableau ci-dessous résume toutes les portées en Java en les triant de la moins
restrictive à la plus restrictive.</p>
<table border="1" class="colwidths-given docutils" id="id1">
<caption><span class="caption-text">Les portées en Java</span><a class="headerlink" href="#id1" title="Lien permanent vers ce tableau">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">mot-clé</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Publique</td>
<td><strong>public</strong></td>
<td>Accessible depuis n’importe quel point de l’application</td>
</tr>
<tr class="row-odd"><td>Protégée</td>
<td><strong>protected</strong></td>
<td>Accessible uniquement depuis les classes du même package et les classes filles</td>
</tr>
<tr class="row-even"><td>Package</td>
<td>&#160;</td>
<td>Accessible uniquement depuis les classes du même package</td>
</tr>
<tr class="row-odd"><td>Privée</td>
<td><strong>private</strong></td>
<td>Accessible uniquement dans la classe de déclaration et les classes internes</td>
</tr>
</tbody>
</table>
<p>La portée <strong>protected</strong> pose parfois un soucis de conception. En effet, on pourrait
considérer que les portées de type privé et package sont inutiles et que tous
les attributs peuvent être déclarés avec la portée <em>protected</em>. Cependant,
en programmation objet, le <a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_ouvert/ferm%C3%A9">principe du ouvert/fermé</a> stipule qu’une classe devrait
être ouverte en extension mais fermée en modification. Cela signifie que par
héritage, les développeurs doivent pouvoir étendre les fonctionnalités d’une
classe en créant un sous-type mais ne doivent pas pouvoir modifier
significativement le comportement de la classe parente. Empêcher une sous-classe
de modifier l’état d’un attribut en le déclarant <strong>private</strong> est une bonne
façon d’éviter aux développeurs d’une sous-classe de modifier involontairement
le comportement d’une classe.</p>
<p>Un règle simple consiste à systématiquement déclarer <strong>private</strong> les attributs
d’une classe sauf si une raison évidente nous suggère de déclarer la portée
<strong>protected</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans l’exemple précédent, la déclaration de l’attribut <em>vitesse</em> comme
<strong>protected</strong> est peu satisfaisante car toutes les classes filles ont maintenant
accès à cet attribut : cela n’est pas conforme au <a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_ouvert/ferm%C3%A9">principe du ouvert/fermé</a>.
Nous verrons au <a class="reference internal" href="polymorphisme.html#surcharge-et-signature"><span class="std std-ref">chapitre suivant</span></a> qu’il existe une
solution qui évite de modifier la portée de cet attribut.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le <a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_ouvert/ferm%C3%A9">principe du ouvert/fermé</a> (Open/close principle) représente le O dans
l’acronyme <a class="reference external" href="https://fr.wikipedia.org/wiki/SOLID_(informatique)">SOLID</a>. Cet acronyme rassemble cinq notions fondamentales dans
la conception objet.</p>
</div>
</div>
<div class="section" id="heritage-des-methodes-et-attributs-de-classe">
<h2>Héritage des méthodes et attributs de classe<a class="headerlink" href="#heritage-des-methodes-et-attributs-de-classe" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme leur nom l’indique, les méthodes et les attributs de classe appartiennent
à une classe. Il est possible d’accéder à une méthode de classe par la classe
dans laquelle la méthode a été déclarée ou par n’importe quelle classe qui en
hérite. Il en va de même pour les attributs de classe. Attention cependant,
si l’attribut de classe est modifiable, sa valeur est partagée par l’ensemble
des classes qui font partie de la hiérarchie d’héritage.</p>
<p>Un exemple classique est l’implémentation d’un compteur qui permet de savoir
combien d’instances ont été créées. Il suffit de créer un compteur comme
attribut de classe.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">nbInstances</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">++</span><span class="n">Vehicule</span><span class="o">.</span><span class="na">nbInstances</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getNbInstances</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">nbInstances</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, nous avons ajouté l’attribut de classe <em>nbInstances</em>
et la méthode de classe <em>getNbInstances</em>. L’attribut de classe est un compteur
qui est incrémenté à chaque fois que le constructeur de <em>Vehicule</em> est appelé.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>

<span class="n">Moto</span> <span class="n">moto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moto</span><span class="o">(</span><span class="s">&quot;Kaneda&quot;</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Vehicule</span><span class="o">.</span><span class="na">getNbInstances</span><span class="o">());</span> <span class="c1">// 2</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Voiture</span><span class="o">.</span><span class="na">getNbInstances</span><span class="o">());</span>  <span class="c1">// 2</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Moto</span><span class="o">.</span><span class="na">getNbInstances</span><span class="o">());</span>     <span class="c1">// 2</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la création d’une instance de <em>Voiture</em> et d’une
instance de <em>Moto</em> incrémente le compteur <em>nbInstances</em>. L’appel à la méthode
<em>getNbInstances</em> retournera le chiffre 2 quelle que soit la classe utilisée
pour invoquer cette méthode. On voit ici, qu’il est parfois important, pour
des raisons de lisibilité, d’utiliser la classe dans laquelle la méthode a été
déclarée pour l’invoquer. En effet, une lecture rapide du code, pourrait nous
faire croire que l’appel à <em>Voiture.getNbInstances</em> retourne le nombre
d’instances de type <em>Voiture</em> créées alors qu’il s’agit du nombre d’instances
de type <em>Vehicule</em> (donc incluant les instances de <em>Moto</em>).</p>
</div>
<div class="section" id="heritage-et-final">
<h2>Héritage et final<a class="headerlink" href="#heritage-et-final" title="Lien permanent vers ce titre">¶</a></h2>
<p>En Java, il est possible de déclarer une classe <strong>final</strong>. Cela signifie
qu’il est impossible d’étendre cette classe.
Elle représente un élément terminal dans l’arborescence d’héritage.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la classe <em>Moto</em> est déclarée <strong>final</strong>. Donc il
est maintenant impossible de déclarer une classe qui étende la classe <em>Moto</em>.</p>
<p>En raison de son impact très fort, la déclaration d’une classe comme <strong>final</strong>
est réservée à des cas très particuliers. Un exemple est la classe
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html">java.lang.String</a>. Cette classe est déclarée <strong>final</strong>. Il est donc impossible
en Java de créer une classe qui hérite de <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html">java.lang.String</a>. Les développeurs de
l’API standard ont jugé qu’en raison de son importance, cette classe devait être
fermée en extension afin d’éviter toute modification de comportement par héritage.</p>
</div>
<div class="section" id="la-composition-has-a">
<h2>La composition (has-a)<a class="headerlink" href="#la-composition-has-a" title="Lien permanent vers ce titre">¶</a></h2>
<p>La composition est le type de relation le plus souvent utilisé en programmation
objet. Elle indique une dépendance entre deux classes. L’une a besoin des
services d’une autre pour réaliser sa fonction. La composition se fait en déclarant
des attributs dans la classe.</p>
<p>Dans notre application de simulation de conduite, si nous introduisons une
classe pour représenter des pneus.</p>
<img alt="_images/composition_vehicule_pneu.png" src="_images/composition_vehicule_pneu.png" />
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pneu</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">float</span> <span class="n">coefficientAdherence</span><span class="o">;</span>

  <span class="c1">// ..</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Alors, nous pouvons indiquer que les véhicules <strong>ont des</strong> pneus.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">protected</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>
  <span class="kd">protected</span> <span class="n">Pneu</span><span class="o">[]</span> <span class="n">pneus</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">Pneu</span><span class="o">[]</span> <span class="nf">getPneus</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">pneus</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pneus</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">[]</span> <span class="o">{</span><span class="k">new</span> <span class="n">Pneu</span><span class="o">(),</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">(),</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">(),</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">()};</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3.conduite</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moto</span> <span class="kd">extends</span> <span class="n">Vehicule</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Moto</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">marque</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pneus</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">[]</span> <span class="o">{</span><span class="k">new</span> <span class="n">Pneu</span><span class="o">(),</span> <span class="k">new</span> <span class="n">Pneu</span><span class="o">()};</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="exercice">
<h2>Exercice<a class="headerlink" href="#exercice" title="Lien permanent vers ce titre">¶</a></h2>
<div class="exercice topic">
<p class="topic-title first">Diplôme et examens</p>
<p>On veut modéliser une système de remise de diplôme. Le système est constitué
des classes <em>Diplome</em>, <em>Examen</em>, <em>Qcm</em> et <em>Projet</em>.</p>
<dl class="docutils">
<dt><em>Diplome</em></dt>
<dd>Cette classe contient un ensemble d’examens. Sa méthode
<em>isValide</em> retourne <strong>true</strong> si la moyenne des notes de tous les examens est
supérieure à 10.</dd>
<dt><em>Examen</em></dt>
<dd>Une classe qui contient une note sur 20.</dd>
<dt><em>Projet</em></dt>
<dd>Le projet est un type spécialisé d’examen. Il est défini par une note d’écrit
sur 10 et une note d’oral sur 10. La note finale est la somme de ces deux notes.</dd>
<dt><em>Qcm</em></dt>
<dd>Le QCM est un type spécialisé d’examen. Il est défini par un nombre de questions.
On calcule la note sur 20 en faisant le rapport entre le nombre de réponses correctes
et le nombre total de questions.</dd>
</dl>
<p>Les relations entre ces classes sont résumées par le diagramme
de classes ci-dessous :</p>
<img alt="_images/exercice_examen.png" src="_images/exercice_examen.png" />
<p>Réalisez les implémentations de ces classes en Java. Écrivez une méthode <strong>main</strong>
qui crée une instance de <em>Diplome</em>, y ajoute tous les types d’examen de manière
à ce que le diplôme soit validé (la méthode <em>Diplome.isValide</em> retourne <strong>true</strong>).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Le langage Java</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a></li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Les relations entre objets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#l-heritage-is-a">L’héritage (is-a)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-et-constructeur">Héritage et constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-simple-object">Héritage simple : Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-et-affectation">Héritage et affectation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-mot-cle-instanceof">Le mot-clé instanceof</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-portee-protected">La portée protected</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-des-methodes-et-attributs-de-classe">Héritage des méthodes et attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-et-final">Héritage et final</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-composition-has-a">La composition (has-a)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a></li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Les lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_interne.html">Les classes internes</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_interfaces_graphiques.html">Swing : les interfaces graphiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_interactions.html">Swing : les interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_notions_avancees.html">Swing : notions avancées</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:david.gayerie.epsi@mailoo.org">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>