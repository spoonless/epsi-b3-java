
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cycle de vie d’un objet &#8212; documentation Le langage Java 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Les packages" href="package.html" />
    <link rel="prev" title="Attributs &amp; méthodes" href="attributs_et_methodes.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cycle-de-vie-d-un-objet">
<h1>Cycle de vie d’un objet<a class="headerlink" href="#cycle-de-vie-d-un-objet" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce chapitre détaille la création d’un objet et son cycle de vie. Nous aborderons
notamment les constructeurs et les mécanismes de gestion de la mémoire de la JVM.</p>
<div class="section" id="le-constructeur">
<h2>Le constructeur<a class="headerlink" href="#le-constructeur" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de déclarer des méthodes particulières dans une classe que l’on
nomme <strong>constructeurs</strong>. Un constructeur a pour objectif d’initialiser un objet
nouvellement créé afin de garantir qu’il est dans un état cohérent avant d’être
utilisé.</p>
<p>Un constructeur a la signature suivante :</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>[portée] [nom de la classe]([paramètres]) {

}
</pre></div>
</div>
<p>Un constructeur se distingue d’une méthode car il n’a jamais de type de retour
(pas même <strong>void</strong>). De plus un constructeur a obligatoirement <strong>le même nom que la classe</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Le constructeur</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Lorsqu’une voiture est créée par l’application avec l’opérateur <strong>new</strong> comme
avec l’instruction suivante :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">();</span>
</pre></div>
</div>
<p>Alors, la JVM crée l’espace mémoire nécessaire pour le nouvel objet de type
<em>Voiture</em>, puis elle appelle le constructeur et enfin elle assigne la référence
de l’objet à la variable <em>voiture</em>. Donc le constructeur permet de réaliser une
initialisation complète de l’objet selon les besoins des développeurs.</p>
<div class="section" id="parametres-de-constructeur">
<h3>Paramètres de constructeur<a class="headerlink" href="#parametres-de-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme les méthodes, les constructeurs peuvent accepter des paramètres et comme
les méthodes, les constructeurs supportent la redéfinition (<em>overloading</em>).
Une classe peut ainsi déclarer plusieurs constructeurs à condition que la liste
des paramètres diffère par le nombre et/ou le type.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la classe <em>Voiture</em> déclare deux constructeurs avec
des paramètres différents. Il est maintenant nécessaire de passer des paramètres
au moment de la création d’une instance de cette classe. Pour cet exemple, on
voit que le constructeur permet de forcer la création d’une instance de <em>Voiture</em>
en fournissant au moins sa marque.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">voiture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">);</span>
<span class="n">Voiture</span> <span class="n">voiture2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;DeLorean&quot;</span><span class="o">,</span> <span class="mf">88.0f</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="valeur-par-defaut-des-attributs">
<h3>Valeur par défaut des attributs<a class="headerlink" href="#valeur-par-defaut-des-attributs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Nous avons vu précédemment que les attributs d’une classe peuvent être initialisés
explicitement à la déclaration. Dans le cas contraire, ils sont initialisés
avec une valeur par défaut. Java garantit que cette initialisation a lieu avant
l’appel au constructeur.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbRoues</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="c1">// la vitesse vaudra 0 et nbRoues vaudra 4</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="c1">// On ne peut créer que des véhicules avec au plus 4 roues</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Les attributs déclarés <strong>final</strong> sont traités un peu différemment. Ces attributs
doivent être obligatoirement et explicitement initialisés avant la fin de la création
de l’objet. Donc, il est possible de les initialiser dans le constructeur. Par
contre, le compilateur génèrera une erreur si :</p>
<ul class="simple">
<li>un constructeur tente d’accéder à un attribut <strong>final</strong> qui n’a pas encore été initialisé</li>
<li>un constructeur se termine sans avoir initialisé explicitement tous les attributs <strong>final</strong></li>
<li>un constructeur tente d’affecter une valeur à un attribut <strong>final</strong> qui a déjà été initialisé
au moment de sa déclaration.</li>
</ul>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">DEFAUT_NBROUES</span><span class="o">;</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="c1">// On ne peut créer que des véhicules avec au plus 4 roues</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="o">:</span> <span class="n">DEFAUT_NBROUES</span><span class="o">;</span>
    <span class="c1">// la vitesse vaudra 0</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="constructeur-par-defaut">
<h3>Constructeur par défaut<a class="headerlink" href="#constructeur-par-defaut" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le compilateur Java garantit que toutes les classes ont au moins un constructeur.
Si vous créez la classe suivante :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Alors, le compilateur ajoutera le code nécessaire qui correspondrait à :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Ce constructeur est appelé le <strong>constructeur par défaut</strong>. Par contre si votre
classe contient au moins un constructeur, quelle que soit sa signature, alors
le compilateur n’ajoutera pas le <strong>constructeur par défaut</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>

  <span class="cm">/* Le compilateur ne génèrera pas de constructeur par défaut.</span>
<span class="cm">   * Pour créer une voiture, je suis obligé de fournir sa marque en paramètre</span>
<span class="cm">   * de création.</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Si votre classe ne contient qu’un seul constructeur sans paramètre dont le corps
est vide, alors vous pouvez supprimer cette déclaration car le compilateur le génèrera
automatiquement.</p>
</div>
</div>
<div class="section" id="constructeur-prive">
<h3>Constructeur privé<a class="headerlink" href="#constructeur-prive" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est tout à fait possible d’interdire l’instantiation d’une classe en Java.
Pour cela, il suffit de déclarer tous ses constructeurs avec une portée <strong>private</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculatrice</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="nf">Calculatrice</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">additionner</span><span class="o">(</span><span class="kt">int</span><span class="o">...</span> <span class="n">valeurs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">resultat</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">valeur</span> <span class="o">:</span> <span class="n">valeurs</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">resultat</span> <span class="o">+=</span> <span class="n">valeur</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">resultat</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Comme montré dans l’exemple ci-dessus, un cas d’usage courant est la création
d’une classe outil. Une classe outil ne contient que des méthodes de classe.
Il n’y a donc aucun intérêt à instancier une telle classe. Donc, on déclare un
constructeur privé pour éviter une utilisation incorrecte.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On peut aussi considérer que la classe <em>Calculatrice</em> est simplement un espace
de nom contenant un ensemble de fonctions. Même si les fonctions n’existent
pas en Java, les classes outils sont un moyen de les simuler.</p>
</div>
</div>
<div class="section" id="appel-d-un-constructeur-dans-un-constructeur">
<h3>Appel d’un constructeur dans un constructeur<a class="headerlink" href="#appel-d-un-constructeur-dans-un-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Certaines classes peuvent offrir différents constructeurs à ses utilisateurs.
Souvent ces constructeurs vont partiellement exécuter le même code. Pour simplifier
la lecture et éviter la duplication de code, un constructeur peut appeler un autre
constructeur en utilisant le mot-clé <strong>this</strong> comme nom du constructeur.
Cependant, un constructeur ne peut appeler qu’un <strong>seul</strong> constructeur et,
s’il le fait, cela doit être sa première instruction.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">marque</span><span class="o">,</span> <span class="n">DEFAUT_NBROUES</span><span class="o">,</span> <span class="mf">0f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">marque</span><span class="o">,</span> <span class="n">nbRoues</span><span class="o">,</span> <span class="mf">0f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="o">:</span> <span class="n">DEFAUT_NBROUES</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>La classe <em>Vehicule</em> ci-dessus offre plusieurs possibilités d’initialisation, mais
les développeurs de cette classe ont évité la duplication en plaçant le code
d’initialisation dans le troisième constructeur.</p>
</div>
<div class="section" id="appel-d-une-methode-dans-un-constructeur">
<h3>Appel d’une méthode dans un constructeur<a class="headerlink" href="#appel-d-une-methode-dans-un-constructeur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est tout à fait possible d’appeler une méthode de l’objet dans un constructeur. Cela
est même très utile pour éviter la duplication de code et favoriser la réutilisation.
Attention cependant au statut particulier des constructeurs. Tant qu’un constructeur
n’a pas achevé son exécution, l’objet n’est pas totalement initialisé. Il peut
donc y avoir des cas où l’appel à une méthode peut avoir des comportements inattendus.</p>
<p>Prenons l’exemple suivant :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vehicule</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesse</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Vehicule</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">,</span> <span class="kt">float</span> <span class="n">vitesseInitiale</span><span class="o">)</span> <span class="o">{</span>
<span class="hll">    <span class="n">faireQuelqueChoseDInattendue</span><span class="o">();</span>
</span>    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span> <span class="o">=</span> <span class="n">nbRoues</span> <span class="o">&lt;</span> <span class="n">DEFAUT_NBROUES</span> <span class="o">?</span> <span class="n">nbRoues</span> <span class="o">:</span> <span class="n">DEFAUT_NBROUES</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesse</span> <span class="o">=</span> <span class="n">vitesseInitiale</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">faireQuelqueChoseDInattendue</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">nbRoues</span><span class="o">);</span> <span class="c1">// 0</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Le constructeur appelle la méthode <em>faireQuelqueChoseDInattendue</em> qui affiche
la valeur de l’attribut <em>nbRoues</em>. Cet attribut est déclaré <strong>final</strong> donc
il n’est pas modifiable durant la vie de l’objet et la tâche du constructeur
va être, entre autres, de lui assigner une valeur. Mais comme la méthode
<em>faireQuelqueChoseDInattendue</em> est appelée avant l’initialisation, elle affichera
0. Il s’agit d’un comportement aberrant du point de vue de la définition de <strong>final</strong>
mais qui compile et s’exécute sans erreur.</p>
<p>Plus généralement, si vous souhaitez appeler des méthodes de l’objet dans un constructeur,
il faut prendre soin de s’assurer que l’état de l’objet nécessaire à l’exécution
de ces méthodes est correctement initialisé avant par le constructeur.</p>
</div>
</div>
<div class="section" id="injection-de-dependances-par-le-constructeur">
<span id="injection-des-dependances"></span><h2>Injection de dépendances par le constructeur<a class="headerlink" href="#injection-de-dependances-par-le-constructeur" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’état interne d’un objet (ses attributs) inclut souvent des références vers d’autres
objets. Parfois, ces objets peuvent eux-même avoir une représentation interne complexe
qui nécessite des références vers d’autres objets… Par exemple, une classe
<em>Voiture</em> peut nécessiter une instance d’une classe <em>Moteur</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Moteur</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbCylindres</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Moteur</span><span class="o">(</span><span class="kt">int</span> <span class="n">nbCylindres</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="o">,</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbCylindres</span> <span class="o">=</span> <span class="n">nbCylindres</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nbSoupapesParCylindre</span> <span class="o">=</span> <span class="n">nbSoupapesParCylindre</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">vitesseMax</span> <span class="o">=</span> <span class="n">vitesseMax</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>À partir de la classe <em>Moteur</em> ci-dessus, nous pouvons fournir l’implémentation
suivante de la classe <em>Voiture</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbCylindres</span><span class="o">,</span> <span class="kt">int</span> <span class="n">nbSoupapesParCylindre</span><span class="o">,</span> <span class="kt">float</span> <span class="n">vitesseMax</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">moteur</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moteur</span><span class="o">(</span><span class="n">nbCylindres</span><span class="o">,</span> <span class="n">nbSoupapesParCylindre</span><span class="o">,</span> <span class="n">vitesseMax</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Et créer une instance de la classe <em>Voiture</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Voiture</span> <span class="n">clio</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;Clio Williams&quot;</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">216</span><span class="o">);</span>
</pre></div>
</div>
<p>Cependant, si nous considérons le type de relation qui unit la classe <em>Voiture</em>
à la classe <em>Moteur</em>, nous constatons que non seulement la classe <em>Voiture</em> est
dépendante de la classe <em>Moteur</em> mais qu’en plus la classe <em>Voiture</em> crée
l’instance de la classe <em>Moteur</em> dont elle a besoin. Donc la classe <em>Voiture</em>
a un couplage très fort avec la classe <em>Moteur</em>. Par exemple, si le constructeur
de la classe <em>Moteur</em> évolue alors le constructeur de la classe <em>Voiture</em> doit
également évoluer.</p>
<p>En programmation objet, créer une objet n’hésite souvent de disposer des
informations nécessaires pour invoquer le constructeur de sa classe. La plupart du temps,
les classes qui sont dépendantes d’autres classes n’ont pas vocation à les
créer car il n’y a pas vraiment de raison à ce qu’elles connaissent les
informations nécessaires à leur création. Dans le cas de notre classe <em>Voiture</em>
nous pouvons proposer simplement l’implémentation :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">fr.epsi.b3</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="n">marque</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Voiture</span><span class="o">(</span><span class="n">String</span> <span class="n">marque</span><span class="o">,</span> <span class="n">Moteur</span> <span class="n">moteur</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">marque</span> <span class="o">=</span> <span class="n">marque</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">moteur</span> <span class="o">=</span> <span class="n">moteur</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>La création d’une instance de <em>Voiture</em> se fait maintenant en deux étapes :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Moteur</span> <span class="n">moteur</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Moteur</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">216</span><span class="o">);</span>
<span class="n">Voiture</span> <span class="n">clio</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Voiture</span><span class="o">(</span><span class="s">&quot;Clio Williams&quot;</span><span class="o">,</span> <span class="n">moteur</span><span class="o">);</span>
</pre></div>
</div>
<p>On dit qu’une instance de la classe <em>Moteur</em> est <strong>injectée</strong> par le constructeur
dans une instance de <em>Voiture</em>. En programmation objet, cela signifie que nous
avons découplé l’utilisation de l’instance de la classe <em>Moteur</em> de sa création.</p>
<p>L’injection de dépendances est une technique de programmation qui permet à une
classe de disposer des instances d’objet dont elle a besoin sans avoir à les créer
directement.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L’injection de dépendance est la technique qui est à la base de <a class="reference external" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">l’inversion
de dépendances</a> (appelée aussi parfois inversion de contrôle) qui est un des
principes <a class="reference external" href="https://fr.wikipedia.org/wiki/SOLID_(informatique)">SOLID</a> en programmation objet. Beaucoup de frameworks Java (comme le
<a class="reference external" href="https://fr.wikipedia.org/wiki/Spring_(framework)">Spring framework</a>) sont basés sur ce principe.</p>
</div>
</div>
<div class="section" id="le-bloc-d-initialisation">
<h2>Le bloc d’initialisation<a class="headerlink" href="#le-bloc-d-initialisation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible d’écrirer un traitement d’initialisation s’effectuant avant l’appel
au constructeur. Il suffit de déclarer un bloc anonyme dans la classe.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">nbRoues</span><span class="o">;</span>

  <span class="o">{</span>
    <span class="n">Configuration</span> <span class="n">cfg</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="o">();</span>
    <span class="n">nbRoues</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="na">nbRouesParVoiture</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, on suppose qu’il existe une classe <em>Configuration</em> et qu’il
est possible de consulter la configuration de l’application pour connaître le nombre
de roues par voiture. Le bloc d’initialisation accède à la configuration et affecte la
bonne valeur à l’attribut <strong>final</strong> <em>nbRoues</em>.</p>
<p>Le bloc d’initialisation est très rarement employé en Java. On peut systématiquement
obtenir le même comportement en déclarant un constructeur.</p>
</div>
<div class="section" id="le-bloc-d-initialisation-de-classe">
<h2>Le bloc d’initialisation de classe<a class="headerlink" href="#le-bloc-d-initialisation-de-classe" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible d’écrire un traitement d’initialisation d’une classe. Ce traitement
ne sera effectué qu’une seule fois : au moment du chargement de la définition de la
classe dans la mémoire de la JVM. Une initialisation de classe se fait à l’aide
d’un bloc d’instructions <strong>static</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_ROUES</span><span class="o">;</span>

  <span class="kd">static</span> <span class="o">{</span>
    <span class="n">Configuration</span> <span class="n">cfg</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="o">();</span>
    <span class="n">NB_ROUES</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="na">nbRouesParVoiture</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, on suppose qu’il existe une classe <em>Configuration</em> et qu’il
est possible de consulter la configuration de l’application pour connaître le nombre
de roues par voiture. Le bloc <strong>static</strong> donne la possibilité d’initialiser
une constante à partir d’un traitement plus complexe.</p>
<p>On peut obtenir un resultat similaire en initialisant la constante <em>NB_ROUES</em> à partir
d’un appel à une méthode de classe :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Voiture</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NB_ROUES</span> <span class="o">=</span> <span class="n">getConfiguration</span><span class="o">().</span><span class="na">nbRouesParVoiture</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Configuration</span> <span class="nf">getConfiguration</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// le code ici pour consulter la configuration</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="memoire-heap-et-stack">
<h2>Mémoire heap et stack<a class="headerlink" href="#memoire-heap-et-stack" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme pour la plupart des langages de programmation, Java utilise deux espaces mémoires :
la <strong>stack</strong> (ou <em>call stack</em>, la pile d’appel) et le <strong>heap</strong> (le tas).</p>
<p>La <strong>stack</strong> correspond à l’espace alloué pour gérer la mémoire nécessaire à l’exécution
des méthodes (d’un thread). C’est dans cet espace que les variables déclarées dans la méthode
sont stockées. Cet espace a la structure d’un pile car lorsqu’une méthode appelle
une autre méthode, l’espace mémoire nécessaire à cet appel s’empile au dessus de l’espace
mémoire précédent. Lorsqu’une méthode se termine l’espace mémoire qui lui est alloué dans
la stack est libéré. Cela signifie que lorsqu’une méthode se termine, il n’est plus possible
d’accéder aux variables qu’elle a déclarées.</p>
<p>Le <strong>heap</strong> permet de stocker de l’information en allouant dynamiquement de l’espace
mémoire lorsque cela est nécessaire et de le libérer lorsqu’il n’est plus utile. Le
heap a une structuration plus complexe qui tient compte de la durée de vie présumée des éléments
qui le composent. Dans le heap se trouve, la description des classes chargées par la JVM
mais surtout tous les objets créés. En effet, le mot-clé <strong>new</strong> a pour fonction de créer
un nouvel objet en stockant ses informations dans le heap.</p>
<p>Tous les objets Java étant créés dans le heap, leur durée de vie peut être plus longue
que le temps d’exécution d’une méthode. Il n’est pas possible pour un développeur
de demander explicitement la destruction d’un objet. Par contre il existe un procédé appelé
le <em>ramasse-miettes</em> (<strong>garbage collector</strong>) qui se charge de libérer la mémoire
lorsqu’il détecte qu’elle n’est plus utilisée.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>La machine virtuelle Java gère elle-même l’espace mémoire allouable à la stack
et au heap (alors qu’il s’agit normalement d’une activité prise en charge
par le système d’exploitation lui-même). Du coup, il est possible de paramétrer
au lancement de la JVM la taille mémoire allouable si on souhaite introduire
des quotas par processus avec les paramètres :</p>
<dl class="docutils">
<dt>-Xms&lt;taille&gt;</dt>
<dd>Taille initiale du heap</dd>
<dt>-Xmx&lt;taille&gt;</dt>
<dd>Taille maximale du heap</dd>
<dt>-Xss&lt;taille&gt;</dt>
<dd>Taille de la stack (par thread)</dd>
</dl>
<p>Par exemple :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ java -Xms512M -Xmx512M MonApplication
</pre></div>
</div>
<p class="last">Dans l’exemple précédent, l’application est lancée avec un heap d’une taille fixe
de 512 Mo.</p>
</div>
</div>
<div class="section" id="le-ramasse-miettes">
<h2>Le ramasse-miettes<a class="headerlink" href="#le-ramasse-miettes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le ramasse-miettes (<em>garbage collector</em>) est un processus léger (<em>thread</em>) qui est
créé par la JVM et qui s’exécute régulièrement pour contrôler l’état de la mémoire.
S’il détecte que des portions de mémoire allouées ne sont plus utilisées, il les
libère afin que l’application ne manque pas de ressource mémoire.</p>
<p>La présence du ramasse-miettes évite aux développeurs de devoir demander explicitement
la libération de la mémoire. D’ailleurs il n’est pas possible en Java de demander
explicitement la libération de la mémoire. Cependant, il est important que les
développeurs comprennent le fonctionnement du ramasse-miettes.</p>
<p>Le ramasse-miettes vérifie périodiquement si les objets sont référencés. Un objet
est référencé si :</p>
<ul class="simple">
<li>la méthode en cours d’exécution ou une méthode de la pile
d’appel possède une variable référençant cet objet</li>
<li>il existe un objet référencé qui possède un attribut référençant cet objet</li>
</ul>
<p>Le ramasse-miettes gère également le problème de la référence circulaire. Un objet
qui contiendrait un attribut qui le référence directement ou indirectement lui-même
n’est pas réellement considéré comme une référence par le ramasse-miettes.</p>
<p>Donc, si un développeur souhaite qu’un objet soit détruit et son espace mémoire
récupéré, il doit s’assurer que plus aucune référence n’existe vers cet objet.
Par exemple, il peut affecter la valeur <strong>null</strong> aux variables et aux attributs
qui référencent cet objet.</p>
<p>Il est également possible de forcer l’appel au ramasse-miettes gâce à la méthode
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#gc--">java.lang.System.gc()</a>. Cependant, cette méthode ne donne aucune garantie quant au résultat.
Vous ne pouvez pas vous baser sur son appel pour garantir la suppression d’un objet
non référencé. Le ramasse-miettes utilise un algorithme complexe qui rend son
comportement difficilement prédictible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Le ramasse-miettes est parfois la préoccupation des ingénieurs système. En effet,
les serveurs implémentés en Java dépendent du ramasse-miettes pour gérer la
désallocation de la mémoire. Même si l’exécution du ramasse-miettes est rapide,
elle peut avoir des effets sur des serveurs très sollicités en entraînant
des micro-interruptions du service. Java propose non pas un
mais des algorithmes de ramasses-miettes configurables. Il est donc possible de choisir
au lancement de la JVM le type de ramasse-miettes à utiliser.</p>
<p class="last">Le ramasse-miettes fait l’objet de modification et d’évolution à toutes les versions de Java.
Pour Java 9, vous pouvez vous reporter au
<a class="reference external" href="https://docs.oracle.com/javase/9/gctuning/toc.htm">guide de tuning</a> du ramasse-miettes.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p>Java propose un mécanisme de ramasse miettes mais ce dernier ne peut libérer
l’espace mémoire que des objets non référencés. Si vous développez une application
qui crée beaucoup d’objets sans donner la possibilité au ramasse-miettes de les collecter,
votre application peut se retrouver à cours d’espace mémoire. Lors de la création d’un
nouvel objet, vous obtiendrez alors une erreur du type <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/OutOfMemoryError.html">java.lang.OutOfMemoryError</a>.</p>
<p class="last">La mémoire n’est pas la seule ressource système avec laquelle les développeurs doivent
composer. Si Java propose un mécanisme pour la gestion de la mémoire, il ne propose
pas de mécanisme automatique pour réclamer les autres types de ressources,
notamment les descripteurs de fichier et de socket.</p>
</div>
</div>
<div class="section" id="la-methode-finalize">
<span id="cycle-de-vie-finalize"></span><h2>La méthode finalize<a class="headerlink" href="#la-methode-finalize" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si un objet souhaite effectuer un traitement avant sa destruction, il peut implémenter
la méthode <em>finalize</em>. Cette méthode a la signature suivante :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="o">{</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Dans la pratique cette méthode n’est utilisée que pour des cas d’implémentation très
avancés. En effet, la JVM ne donne strictement <strong>aucune</strong> garantie sur le moment où
la méthode <strong>finalize</strong> est appelée. Elle peut même ne jamais être appelée si l’application se
termine avant que le ramasse-miettes ne réclame l’espace mémoire de l’objet. Elle n’a donc
pas le même statut ni la même importance qu’un destructeur dans le langage C++.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjetCurieux</span> <span class="o">{</span>

  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;je vais disparaître !&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ObjetCurieux</span> <span class="n">objetCurieux</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjetCurieux</span><span class="o">();</span>
    <span class="n">objetCurieux</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>

    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span> <span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="sc">&#39;.&#39;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, Un objet qui n’implémente que la méthode <em>finalize</em> est créé
puis la variable qui le référence est mise à <strong>null</strong>. Ensuite, le programme appelle
explicitement le ramasse-miettes avec la méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#gc--">java.lang.System.gc()</a>. Enfin,
une boucle se contente d’afficher mille points sur la sortie standard. Cette boucle <strong>for</strong>
est utile car généralement le programme s’arrête trop vite et le ramasse-miettes
n’a pas le temps d’appeler <em>finalize</em>. Si vous exécutez ce programme plusieurs fois,
vous constaterez que le message «&nbsp;je vais disparaître !&nbsp;» ne s’affiche pas au même moment.
Cela traduit bien le fait que le comportement du ramasse-miettes varie d’une exécution
à l’autre.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Le langage Java</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a></li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cycle de vie d’un objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#le-constructeur">Le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="#injection-de-dependances-par-le-constructeur">Injection de dépendances par le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-bloc-d-initialisation">Le bloc d’initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-bloc-d-initialisation-de-classe">Le bloc d’initialisation de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoire-heap-et-stack">Mémoire heap et stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-ramasse-miettes">Le ramasse-miettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-methode-finalize">La méthode finalize</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="relations_entre_objets.html">Les relations entre objets</a></li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a></li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Les lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_interne.html">Les classes internes</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_interfaces_graphiques.html">Swing : les interfaces graphiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_interactions.html">Swing : les interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="swing_notions_avancees.html">Swing : notions avancées</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:david.gayerie.epsi@mailoo.org">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>